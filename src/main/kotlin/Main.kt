package org.example

import org.telegram.telegrambots.bots.TelegramLongPollingBot
import org.telegram.telegrambots.meta.TelegramBotsApi
import org.telegram.telegrambots.meta.api.methods.AnswerCallbackQuery
import org.telegram.telegrambots.meta.api.methods.send.SendMessage
import org.telegram.telegrambots.meta.api.methods.updatingmessages.DeleteMessage
import org.telegram.telegrambots.meta.api.objects.Update
import org.telegram.telegrambots.meta.api.objects.replykeyboard.InlineKeyboardMarkup
import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard
import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup
import org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.InlineKeyboardButton
import org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardButton
import org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow
import org.telegram.telegrambots.updatesreceivers.DefaultBotSession
import java.time.Duration
import java.time.Instant
import java.util.concurrent.ConcurrentHashMap
import java.util.concurrent.Executors
import java.util.concurrent.ScheduledExecutorService
import java.util.concurrent.TimeUnit

fun main() {
    val botsApi = TelegramBotsApi(DefaultBotSession::class.java)
    botsApi.registerBot(CareerGameBot())
}

data class StoryEvent(
    val question: String,
    val options: List<String>,
    val correctAnswerIndex: Int
)

private val bestTimes = ConcurrentHashMap<Int, Duration>()

data class StoryPath(
    val title: String,
    val description: String,
    val events: List<StoryEvent>
)

class CareerGameBot : TelegramLongPollingBot() {
    private val userStates = mutableMapOf<Long, Int>()
    private val userErrors = mutableMapOf<Long, Int>()
    private val userStartTime = mutableMapOf<Long, Instant>()
    private val userMessageIds = mutableMapOf<Long, Int>()
    private val userCurrentStory = mutableMapOf<Long, Int>()
    private val scheduler: ScheduledExecutorService = Executors.newScheduledThreadPool(1)

    companion object {
        private const val MAX_ERRORS = 3
    }

    private val storyPaths = listOf(

        //region События: Уборщик -> Мэр
        StoryPath(
            "От уборщика до мэра",
            "Пройдите путь от простого уборщика до мэра города",
            listOf(
                // Уровень 1-10: Начало карьеры (уборщик)
                StoryEvent("Ты устроился(ась) на работу уборщиком. С чего начнёшь?",
                    listOf("Поговорю с охраной", "Поищу место для перекура", "Убирать коридоры"), 2),
                StoryEvent("Твоя уборка заметна. Начальник доволен. Что дальше?",
                    listOf("Сфоткаюсь для соцсетей", "Предложу план уборки здания", "Попрошу премию"), 1),
                )
        ),
        //endregion

        //region События: Стажёр -> министр здравоохранения
        StoryPath(
            "От стажера до министра здравоохранения",
            "Пройдите путь от простого стажера в больнице до министра здравоохранения",
            listOf(
                    // Уровень 1-10: Стажер
                    StoryEvent("Твой первый день стажёром в больнице. Что сделаешь?",
                        listOf("Познакомлюсь с коллективом", "Изучу документацию", "Пойду помогать пациентам"), 0),
                    StoryEvent("Пациент жалуется на боль. Твои действия?",
                        listOf("Вызову врача", "Попробую помочь сам", "Запишу жалобу"), 0),
                    StoryEvent("Тебе предлагают подделать документы. Как поступишь?",
                        listOf("Откажусь", "Попрошу время подумать", "Соглашусь за вознаграждение"), 0),
                    StoryEvent("Ты заметил ошибку в назначении лекарств. Что сделаешь?",
                        listOf("Промолчу", "Сообщу старшей медсестре", "Исправлю сам"), 1),
                    StoryEvent("Врач просит тебя выполнить не медицинскую работу. Твоя реакция?",
                        listOf("Вежливо откажусь", "Выполню", "Пожалуюсь руководству"), 0),
                    StoryEvent("Ты устал и хочешь отдохнуть, но работы много. Как поступишь?",
                        listOf("Уйду отдыхать", "Попрошу помощи", "Продолжу работать"), 1),
                    StoryEvent("Пациент благодарит тебя. Как ответишь?",
                        listOf("Приму благодарность", "Скажу, что это моя работа", "Посоветую поблагодарить врача"), 2),
                    StoryEvent("Коллега просит тебя подменить её. Твои действия?",
                        listOf("Соглашусь", "Откажусь", "Проконсультируюсь с начальством"), 2),
                    StoryEvent("Ты нашёл потерянные анализы пациента. Что сделаешь?",
                        listOf("Выброшу", "Передам в регистратуру", "Отдам лично пациенту"), 1),
                    StoryEvent("Тебе нужно научиться делать уколы. Твой подход?",
                        listOf("Потренируюсь на манекене", "Попрошу показать", "Попробую сразу на пациенте"), 1),

                    // Уровень 11-20: Младший медперсонал
                    StoryEvent("Тебя повысили до младшей медсестры. Первое решение?",
                        listOf("Освою новые обязанности", "Познакомлюсь с коллегами", "Составлю график"), 0),
                    StoryEvent("Пациент отказывается от процедуры. Как поступишь?",
                        listOf("Настою на своём", "Вызову врача", "Объясню необходимость"), 2),
                    StoryEvent("Ты забыл(а) выполнить назначение врача. Что сделаешь?",
                        listOf("Сделаю сейчас", "Признаю ошибку", "Спрячу факт"), 1),
                    StoryEvent("Коллега постоянно опаздывает. Твои действия?",
                        listOf("Пожалуюсь начальству", "Поговорю с ней", "Закрою глаза"), 1),
                    StoryEvent("Тебе нужно работать в праздник. Твоя реакция?",
                        listOf("Откажусь", "Попрошу двойную оплату", "Соглашусь"), 2),
                    StoryEvent("Ты обнаружил(а) недостачу медикаментов. Что сделаешь?",
                        listOf("Сообщу заведующему", "Промолчу", "Попробую найти"), 0),
                    StoryEvent("Пациент требует особого внимания. Как поступишь?",
                        listOf("Уделю время", "Буду как со всеми", "Переведу в другой кабинет"), 0),
                    StoryEvent("Тебе предлагают пройти курсы повышения квалификации. Решение?",
                        listOf("Откажусь", "Соглашусь", "Выберу другие курсы"), 1),
                    StoryEvent("В отделении аврал. Твои действия?",
                        listOf("Буду работать быстрее", "Позову на помощь", "Сосредоточусь на важном"), 1),
                    StoryEvent("Ты не согласен(на) с методом лечения. Что сделаешь?",
                        listOf("Промолчу", "Обсуду с врачом", "Пойду к главврачу"), 1),

                    // Уровень 21-30: Старшая медсестра
                    StoryEvent("Тебя назначили старшей медсестрой. Первый приказ?",
                        listOf("Проведу собрание", "Проверю документацию", "Усилю контроль"), 0),
                    StoryEvent("Подчинённая отказывается выполнять задание. Твои действия?",
                        listOf("Накажу", "Выясню причины", "Сделаю сама"), 1),
                    StoryEvent("Начальство требует сократить расходы. Твой план?",
                        listOf("Урежу зарплаты", "Оптимизирую процессы", "Откажусь"), 1),
                    StoryEvent("Конфликт между медсёстрами. Как разрешишь?",
                        listOf("Накажу обеих", "Разведу по сменам", "Проведу переговоры"), 2),
                    StoryEvent("Тебе нужно уволить сотрудницу. Как поступишь?",
                        listOf("Уволю без объяснений", "Обосную причины", "Предложу шанс"), 1),
                    StoryEvent("Отделение показывает плохие результаты. Твои действия?",
                        listOf("Обвиню предыдущего", "Спрошу мнение коллег", "Введу новые правила"), 2),
                    StoryEvent("Тебе предложили перейти в другое отделение. Решение?",
                        listOf("Откажусь", "Соглашусь", "Попрошу время подумать"), 2),
                    StoryEvent("Медсестра предлагает улучшить процесс. Твоя реакция?",
                        listOf("Отвергну", "Рассмотрю", "Внедрю сразу"), 1),
                    StoryEvent("Нужно выбрать между качеством и скоростью. Твой выбор?",
                        listOf("Скорость важнее", "Качество важнее", "Найду баланс"), 2),
                    StoryEvent("Тебя пригласили на совещание врачей. Как подготовишься?",
                        listOf("Не буду готовиться", "Соберу данные", "Подготовлю предложения"), 1),

                    // Уровень 31-40: Заведующий отделением
                    StoryEvent("Теперь ты заведующий(ая) отделением. Первое решение?",
                        listOf("Познакомлюсь с командой", "Проведу аудит", "Введу новые правила"), 0),
                    StoryEvent("Бюджет сократили на 20%. Твой подход?",
                        listOf("Уволю часть штата", "Оптимизирую расходы", "Попрошу доп. финансирование"), 1),
                    StoryEvent("Главврач требует невозможного. Твои действия?",
                        listOf("Предложу реальный вариант", "Откажусь", "Соглашусь"), 0),
                    StoryEvent("Твоё отделение показало лучшие результаты. Как отметишь?",
                        listOf("Присвою заслугу себе", "Поощрю команду", "Попрошу премию"), 1),
                    StoryEvent("Конфликт с другим отделением. Как разрешишь?",
                        listOf("Проведу переговоры", "Нажалуюсь главврачу", "Игнорирую"), 0),
                    StoryEvent("Нужно внедрить непопулярные изменения. Твоя тактика?",
                        listOf("Прикажу выполнять", "Объясню необходимость", "Смягчу требования"), 1),
                    StoryEvent("Тебе предлагают возглавить проблемный проект. Решение?",
                        listOf("Откажусь", "Соглашусь", "Возьмусь с условиями"), 2),
                    StoryEvent("Ключевой врач уходит. Как поступишь?",
                        listOf("Найду замену", "Удержу любой ценой", "Перераспределю нагрузку"), 0),
                    StoryEvent("Главврач недоволен твоими результатами. Твои действия?",
                        listOf("Оправдаюсь", "Представлю план улучшений", "Обвиню команду"), 1),
                    StoryEvent("Нужно выбрать между карьерой и пациентом. Выбор?",
                        listOf("Карьера важнее", "Пациент важнее", "Постараюсь совместить"), 1),

                    // Уровень 41-50: Заместитель главврача
                    StoryEvent("Теперь ты заместитель главврача. Первое решение?",
                        listOf("Изучу положение дел", "Составлю стратегию", "Проведу кадровые перестановки"), 1),
                    StoryEvent("Больница в кризисе. Твои действия?",
                        listOf("Оптимизирую процессы", "Уволю часть персонала", "Ищу спонсоров"), 2),
                    StoryEvent("Нужно выбрать между прибылью и качеством лечения. Решение?",
                        listOf("Качество важнее", "Найду компромисс", "Прибыль важнее"), 0),
                    StoryEvent("Скандал в СМИ о больнице. Как реагировать?",
                        listOf("Выпущу заявление", "Проведу пресс-конференцию", "Промолчу"), 0),
                    StoryEvent("Частная клиника предлагает перейти к ним. Твои действия?",
                        listOf("Выслушаю предложение", "Откажусь", "Использую для переговоров"), 2),
                    StoryEvent("Нужно сократить бесплатные услуги. Как поступишь?",
                        listOf("Оптимизирую расходы", "Отменю некоторые", "Оставлю как есть"), 0),
                    StoryEvent("Крупный спонсор под угрозой. Твоя стратегия?",
                        listOf("Пойду на уступки", "Найду нового", "Откажусь от помощи"), 1),
                    StoryEvent("Минздрав требует отчёта. Как подготовишь?",
                        listOf("Приукрашу данные", "Предоставлю факты", "Попрошу отсрочку"), 1),
                    StoryEvent("Тебе предлагают политическую карьеру. Решение?",
                        listOf("Соглашусь", "Рассмотрю", "Откажусь"), 1),
                    StoryEvent("Ты стал(а) лицом больницы. Как себя поведёшь?",
                        listOf("Использую для продвижения", "Буду скромнее", "Избегать публичности"), 0),

                    // Уровень 51-60: Главный врач
                    StoryEvent("Тебя назначили главврачом. Первое решение?",
                        listOf("Проведу собрание коллектива", "Изучу проблемы", "Представлю программу"), 2),
                    StoryEvent("Бюджетный дефицит. Как поступишь?",
                        listOf("Повышу платные услуги", "Урежу расходы", "Привлеку инвесторов"), 1),
                    StoryEvent("Эпидемия в больнице. Твой план?",
                        listOf("Закрою отделение", "Создам карантин", "Приму экстренные меры"), 2),
                    StoryEvent("Забастовка персонала. Твои действия?",
                        listOf("Пойду на уступки", "Уволю зачинщиков", "Проведу переговоры"), 0),
                    StoryEvent("Крупные врачи уходят. Как остановишь?",
                        listOf("Повышу зарплаты", "Предложу льготы", "Улучшу условия"), 1),
                    StoryEvent("Скандал с поставщиками. Твоя позиция?",
                        listOf("Сменю поставщика", "Найду компромисс", "Проведу проверку"), 2),
                    StoryEvent("Минздрав перекладывает на тебя вину. Как поступишь?",
                        listOf("Приму вину", "Публично оправдаюсь", "Соберу доказательства"), 2),
                    StoryEvent("Тебе предлагают поддержку на выборах. Условия?",
                        listOf("Оговорю обязательства", "Откажусь", "Приму без условий"), 0),
                    StoryEvent("Нужно выбрать между друзьями и должностью. Решение?",
                        listOf("Друзья важнее", "Должность важнее", "Постараюсь совместить"), 2),
                    StoryEvent("Минздрав собирается проводить реформу. Твои действия?",
                        listOf("Поддержу", "Начну готовиться", "Выступлю против"), 1),

                    // Уровень 61-70: Руководитель департамента
                    StoryEvent("Тебя назначили руководителем департамента здравоохранения. Первый шаг?",
                        listOf("Создам команду", "Изучу ситуацию", "Разработаю программу"), 2),
                    StoryEvent("Оппонент распространяет ложь о твоей работе. Твоя реакция?",
                        listOf("Начну контрпропаганду", "Игнорировать", "Официально опровергну"), 2),
                    StoryEvent("Нужно выбрать приоритет реформ. Что выберешь?",
                        listOf("Борьба с коррупцией", "Доступность медицины", "Качество услуг"), 1),
                    StoryEvent("СМИ искажают твои слова. Как поступишь?",
                        listOf("Создам свои каналы", "Проведу пресс-конференцию", "Подам в суд"), 1),
                    StoryEvent("Спонсор требует непопулярных решений. Твой выбор?",
                        listOf("Откажусь от денег", "Найду компромисс", "Приму условия"), 1),
                    StoryEvent("Рейтинги падают. Как исправишь ситуацию?",
                        listOf("Измени программу", "Усилю PR", "Сменю команду"), 1),
                    StoryEvent("Скандал становится достоянием общественности. Твои действия?",
                        listOf("Промолчу", "Расскажу свою версию", "Публично извинюсь"), 2),
                    StoryEvent("Оппонент предлагает объединить усилия. Твоё решение?",
                        listOf("Потребую лидерства", "Рассмотрю предложение", "Откажусь"), 1),
                    StoryEvent("На совещании тебя провоцируют. Как себя поведёшь?",
                        listOf("Использую как возможность", "Агрессивно отвечу", "Сохраню хладнокровие"), 2),
                    StoryEvent("Появляется компромат. Что сделаешь?",
                        listOf("Отрицаю всё", "Признаю ошибки", "Предоставлю доказательства"), 1),

                    // Уровень 71-80: Замминистра
                    StoryEvent("Тебя назначили заместителем министра. Первое решение?",
                        listOf("Отпраздную", "Сформирую команду", "Начну реализацию программы"), 2),
                    StoryEvent("Бюджет оказался хуже, чем ожидалось. Твои действия?",
                        listOf("Скрою правду", "Найду источники", "Пересмотрю планы"), 2),
                    StoryEvent("Первая встреча с врачами. Как себя подготовишь?",
                        listOf("Прочитаю доклад", "Выслушаю проблемы", "Проведу опрос"), 1),
                    StoryEvent("Команда саботирует решения. Как поступишь?",
                        listOf("Уволю всех", "Создам параллельные структуры", "Проведу переговоры"), 2),
                    StoryEvent("Кризис в здравоохранении. Твой план?",
                        listOf("Повышу тарифы", "Найду инвестиции", "Проведу реформу"), 2),
                    StoryEvent("Правительство требует непопулярных мер. Твоя позиция?",
                        listOf("Выполню без вопросов", "Попробую договориться", "Открыто откажусь"), 1),
                    StoryEvent("Клиники уклоняются от стандартов. Твои действия?",
                        listOf("Закрою глаза", "Предложу помощь", "Проведу проверки"), 2),
                    StoryEvent("Протесты медиков. Как реагировать?",
                        listOf("Разгоню", "Проигнорирую", "Вступлю в диалог"), 2),
                    StoryEvent("СМИ критикуют реформы. Твоя стратегия?",
                        listOf("Ограничу доступ", "Улучшу коммуникацию", "Покажу достижения"), 1),
                    StoryEvent("Нужно выбрать между популярностью и реформами. Выбор?",
                        listOf("Популярность важнее", "Реформы важнее", "Постараюсь совместить"), 2),

                    // Уровень 81-90: Предвыборная кампания
                    StoryEvent("Ты выдвигаешь свою кандидатуру в министры. Первый шаг?",
                        listOf("Создам команду", "Найду спонсоров", "Разработаю программу"), 2),
                    StoryEvent("Оппонент обвиняет тебя в провалах. Твоя реакция?",
                        listOf("Начну контрпропаганду", "Игнорировать", "Приведу факты"), 2),
                    StoryEvent("Нужно выбрать основную тему кампании. Что выберешь?",
                        listOf("Борьба с коррупцией", "Доступная медицина", "Технологическое развитие"), 1),
                    StoryEvent("СМИ искажают статистику. Как поступишь?",
                        listOf("Создам свои каналы", "Предоставлю данные", "Подам в суд"), 1),
                    StoryEvent("Фармкомпании предлагают поддержку. Твой выбор?",
                        listOf("Откажусь", "Найду компромисс", "Приму условия"), 0),
                    StoryEvent("Рейтинги падают. Как исправишь ситуацию?",
                        listOf("Измени программу", "Усилю PR", "Сменю команду"), 1),
                    StoryEvent("Личный скандал. Твои действия?",
                        listOf("Промолчу", "Расскажу свою версию", "Публично извинюсь"), 2),
                    StoryEvent("Оппонент предлагает объединение. Твоё решение?",
                        listOf("Потребую лидерства", "Рассмотрю предложение", "Откажусь"), 1),
                    StoryEvent("На дебатах тебя провоцируют. Как себя поведёшь?",
                        listOf("Использую как возможность", "Агрессивно отвечу", "Сохраню хладнокровие"), 2),
                    StoryEvent("За день до выборов появляется компромат. Что сделаешь?",
                        listOf("Отрицаю всё", "Признаю ошибки", "Предоставлю доказательства"), 1),

                    // Уровень 91-100: Министр здравоохранения
                    StoryEvent("Ты стал(а) министром! Первое решение?",
                        listOf("Отпраздную", "Сформирую команду", "Начну реформы"), 2),
                    StoryEvent("Бюджет меньше обещанного. Твои действия?",
                        listOf("Скрою правду", "Найду источники", "Пересмотрю планы"), 2),
                    StoryEvent("Первая встреча с региональными министрами. Как подготовишься?",
                        listOf("Прочитаю доклад", "Выслушаю проблемы", "Проведу опрос"), 1),
                    StoryEvent("Старая команда саботирует. Как поступишь?",
                        listOf("Уволю всех", "Создам параллельные структуры", "Проведу переговоры"), 2),
                    StoryEvent("Кризис в системе здравоохранения. Твой план?",
                        listOf("Повышу тарифы", "Найду инвестиции", "Проведу реформу"), 2),
                    StoryEvent("Премьер требует непопулярных мер. Твоя позиция?",
                        listOf("Выполню без вопросов", "Попробую договориться", "Открыто откажусь"), 1),
                    StoryEvent("Коррупция в регионах. Твои действия?",
                        listOf("Закрою глаза", "Проведу проверки", "Создам комиссию"), 1),
                    StoryEvent("Протесты врачей. Как реагировать?",
                        listOf("Разгоню", "Проигнорирую", "Вступлю в диалог"), 2),
                    StoryEvent("СМИ критикуют реформы. Твоя стратегия?",
                        listOf("Ограничу доступ", "Улучшу коммуникацию", "Покажу достижения"), 1),
                    StoryEvent("Ты завершаешь срок. Что дальше?",
                        listOf("Уйду из политики", "Перейду на международный уровень", "Пойду на переизбрание"), 1)
            )
        ),
        //endregion

        //region События: Зэк -> криминальный босс
        StoryPath(
            "От зэка до криминального босса",
            "Пройдите путь от тюремного заключённого до властителя преступного мира",
            listOf(
                // Уровень 1-10: Тюремный новичок
                StoryEvent("Твой первый день в зоне. Как себя поведёшь?",
                    listOf("Найду «покровителя»", "Дам отпор сразу", "Буду держаться нейтралитета"), 0),
                StoryEvent("Сокамерник требует твою пайку. Твои действия?",
                    listOf("Отдам часть", "Ударю по лицу", "Позову надзирателя"), 1),
                StoryEvent("Надзиратель предлагает стать «стукачом». Твой выбор?",
                    listOf("Соглашусь за защиту", "Откажусь", "Симулирую согласие"), 2),
                StoryEvent("Ты нашёл заточку в бараке. Что сделаешь?",
                    listOf("Спрячу для себя", "Отдам смотрящему", "Выброшу в утиль"), 1),
                StoryEvent("Колония в «закрытии» из-за бунта. Как поступишь?",
                    listOf("Присоединюсь к бунту", "Спрячусь в камере", "Помогу охране"), 0),
                StoryEvent("Тебя зовут в тюремную банду. Решение?",
                    listOf("Вступлю за защиту", "Откажусь", "Попрошу время подумать"), 0),
                StoryEvent("Новичка избивают в душевой. Твоя реакция?",
                    listOf("Помогу ему", "Пройду мимо", "Присоединюсь к избиению"), 1),
                StoryEvent("Ты проиграл в карты долг. Как отдашь?",
                    listOf("Отработаю в прачечной", "Украду у другого зэка", "Попрошу отсрочку"), 2),
                StoryEvent("Начальник колонии предлагает «условно-досрочное». Условие — сдать банду.",
                    listOf("Соглашусь", "Откажусь", "Предупрежу своих"), 1),
                StoryEvent("Твой сокамерник планирует побег. Что сделаешь?",
                    listOf("Присоединюсь", "Доложу надзирателю", "Сделаю вид, что не знаю"), 0),

                // Уровень 11-20: Член банды
                StoryEvent("Тебя приняли в местную «братву». Первое задание?",
                    listOf("Передать запретку", "Избить должника", "Следить за новичком"), 0),
                StoryEvent("Конкуренты угрожают твоей группе. Твои действия?",
                    listOf("Организую засаду", "Договорюсь о разделе зон", "Спрячусь"), 1),
                StoryEvent("Ты пойман с самодельным ножом. Кого подставишь?",
                    listOf("Никого — признаю своё", "Чужака из другой камеры", "Скажу, что подбросили"), 2),
                StoryEvent("В тюрьму привозят твоего уличного врага. Что сделаешь?",
                    listOf("Убью при первой возможности", "Заключу перемирие", "Использую его для своих целей"), 1),
                StoryEvent("Твой «смотрящий» требует убить человека. Твой выбор?",
                    listOf("Выполню приказ", "Саботирую исполнение", "Переложу вину на другого"), 0),
                StoryEvent("На зоне объявлен «беспредел» — режут стукачей. Твоя роль?",
                    listOf("Возглавлю расправу", "Буду в стороне", "Спрячу подозреваемого"), 2),
                StoryEvent("Тебе предлагают возглавить мелкую группировку. Решение?",
                    listOf("Возьму власть", "Откажусь из-за рисков", "Стану «серым кардиналом»"), 0),
                StoryEvent("Охрана подбрасывает наркотики в твою камеру. Как поступишь?",
                    listOf("Спрячу в чужой камере", "Признаюсь «смотрящему»", "Подставлю конкурента"), 1),
                StoryEvent("Твой друг по банде арестован за убийство. Поможешь?",
                    listOf("Да, организую адвоката", "Нет — это риск", "Дам деньги на молчание"), 0),
                StoryEvent("Ты узнаёшь, что твою девушку «крышует» другой. Твои действия?",
                    listOf("Прикажу убить его", "Выкуплю её", "Оставлю — это неважно"), 1),

                // Уровень 21-30: Авторитет
                StoryEvent("Тебя переводят в колонию послабее — теперь ты «авторитет». Первый приказ?",
                    listOf("Установлю свои правила", "Подкуплю охрану", "Уберу неугодных"), 0),
                StoryEvent("Молодые зэки бунтуют против твоей власти. Как усмиришь?",
                    listOf("Жестоко накажу зачинщика", "Дам им «работу»", "Разделю и поссорю"), 2),
                StoryEvent("Начальник колонии требует 50% от твоей «масти». Твоя реакция?",
                    listOf("Убью его семью", "Дам 30%", "Соглашусь, но подставлю"), 1),
                StoryEvent("Ты организуешь первый тюремный бизнес:",
                    listOf("Передача запрещёнок", "Ростовщичество", "Подпольный цех"), 2),
                StoryEvent("Конкурирующий «вор в законе» объявляет тебе войну. Стратегия?",
                    listOf("Закажу его убийство", "Подкуплю его людей", "Обращусь к «сходняку»"), 0),
                StoryEvent("Ты выходишь на свободу. Первое действие на воле?",
                    listOf("Встречусь с «бугром»", "Заберу старые долги", "Легализуюсь через бизнес"), 1),
                StoryEvent("Полиция начинает слежку. Как себя поведёшь?",
                    listOf("Подкуплю детектива", "Уеду в другой город", "Буду жить «по чистой»"), 0),
                StoryEvent("Старый друг просит помочь скрыть труп. Твой выбор?",
                    listOf("Организую утилизацию", "Откажусь", "Сдам его полиции"), 0),
                StoryEvent("Ты открываешь легальный бизнес для отмыва денег:",
                    listOf("Автосалон", "Строительная фирма", "Ресторан"), 1),
                StoryEvent("Твои люди попадаются с наркотиками. Как их выручишь?",
                    listOf("Заплачу за адвокатов", "Дам команду молчать", "Отрекусь от них"), 2),

                // Уровень 31-40: Криминальный лидер
                StoryEvent("Теперь у тебя своя группировка. Первый криминальный доход:",
                    listOf("Рэкет", "Нелегальный игорный клуб", "Контрабанда"), 2),
                StoryEvent("Конкуренты поджигают твой склад. Ответные меры?",
                    listOf("Устрою резню", "Куплю их бизнес", "Обращусь к «арбитру»"), 1),
                StoryEvent("Полицейский требует ежемесячную «дань». Твои действия?",
                    listOf("Убью его", "Заплачу", "Соберу на него компромат"), 2),
                StoryEvent("Один из твоих «бригадиров» сливает информацию. Как накажешь?",
                    listOf("Пытками и казнью", "Изгоню из города", "Подставлю под арест"), 0),
                StoryEvent("Ты выходишь на международный уровень. Первый шаг:",
                    listOf("Контрабанда оружия", "Отмыв денег через офшоры", "Коррупция в таможне"), 1),
                StoryEvent("Семья угрожает уйти, если ты не завяжешь. Твоё решение?",
                    listOf("Отправлю их за границу", "Пообещаю «чистую» жизнь", "Выберу криминал"), 2),
                StoryEvent("Твой ближайший друг становится полицейским. Как поступишь?",
                    listOf("Убью его", "Шантажирую", "Использую как информатора"), 2),
                StoryEvent("Банк отказывает в кредите для отмыва. Твой ответ?",
                    listOf("Подожгу отделение", "Подкуплю управляющего", "Куплю банк через подставных"), 1),
                StoryEvent("Тебе предлагают «крышевать» политика. Рискнешь?",
                    listOf("Да, это новые возможности", "Нет — слишком опасно", "Соберу на него досье"), 0),
                StoryEvent("Война с другим кланом. Твоя тактика:",
                    listOf("Нанял киллера", "Договорился о перемирии", "Слил информацию полиции"), 0),

                // Уровень 41-50: Олигарх преступного мира
                StoryEvent("Ты контролируешь 30% города. Как легализуешься?",
                    listOf("Куплю место в мэрии", "Создаду благотворительный фонд", "Войду в совет директоров завода"), 1),
                StoryEvent("Судья выносит тебе приговор. Твой ход:",
                    listOf("Подкуплю присяжных", "Организую побег", "Уничтожу доказательства"), 0),
                StoryEvent("Журналист готовит разоблачение. Твои действия?",
                    listOf("Закажу убийство", "Предложу миллион за молчание", "Опубликую его компромат"), 1),
                StoryEvent("Ты входите в топ-10 самых разыскиваемых. Стратегия:",
                    listOf("Перееду в Дубай", "Проведу «смерть» и сменю личность", "Куплю неприкосновенность"), 2),
                StoryEvent("ФСБ начинает операцию против тебя. Как защитишься?",
                    listOf("Взятка на самом верху", "Солью конкурентов вместо себя", "Уничтожу все доказательства"), 0),
                StoryEvent("Твой сын хочет пойти в полицию. Твоя реакция:",
                    listOf("Запрещу", "Поддержу — это прикрытие", "Отправлю учиться за границу"), 2),
                StoryEvent("Криминальный «совет» предлагает тебе стать «вором в законе». Твой выбор:",
                    listOf("Коронуюсь", "Откажусь — это анахронизм", "Использую титул для влияния"), 0),
                StoryEvent("Ты покупаете футбольный клуб. Зачем?",
                    listOf("Отмыв денег", "Политический имидж", "Личный интерес"), 1),
                StoryEvent("Политик требует 70% твоего бизнеса за защиту. Твоё решение:",
                    listOf("Убью его", "Дам 30%", "Сдам его оппонентам"), 2),
                StoryEvent("Твоя империя стоит перед выбором:",
                    listOf("Полная легализация", "Война с государством", "Уход в тень"), 0),

                // Уровень 51-60: Тень государства
                StoryEvent("Теперь ты неофициальный «хозяин города». Первый указ:",
                    listOf("Контроль над полицией", "Свои люди в мэрии", "Монополия на тендеры"), 1),
                StoryEvent("Президент объявляет «войну преступности». Твой ответ:",
                    listOf("Подкуплю его окружение", "Уйду в глубокое подполье", "Инсценирую свою смерть"), 0),
                StoryEvent("Твой наркокартель расширяется в Европу. Метод:",
                    listOf("Коррупция в ЕС", "Союз с местными бандами", "Легальный бизнес-прикрытие"), 2),
                StoryEvent("Интерпол объявляет тебя в розыск. Как избежишь экстрадиции?",
                    listOf("Куплю дипломатический паспорт", "Пластическая операция", "Управление через подставных"), 0),
                StoryEvent("Ты финансируешь революцию в стране третьего мира. Цель:",
                    listOf("Контроль над ресурсами", "Убежище", "Расширение влияния"), 2),
                StoryEvent("Твой IT-специалист предлагает создать криптовалюту для отмыва. Рискнёшь?",
                    listOf("Да, инвестирую $10 млн", "Нет — это слишком сложно", "Протестирую на малых суммах"), 0),
                StoryEvent("ООН вносит тебя в санкционный список. Твои действия:",
                    listOf("Подкуплю чиновников ООН", "Переведу активы на родственников", "Использую подставные компании"), 1),
                StoryEvent("Ты решаешь баллотироваться в парламент. Как пройдёшь фильтры?",
                    listOf("Фальсифицирую биографию", "Куплю избирательную комиссию", "Создам пропаганду"), 1),
                StoryEvent("Твои люди похищают судью. Что прикажешь с ним сделать?",
                    listOf("Заставить работать на нас", "Убить для устрашения", "Шантажировать семью"), 0),
                StoryEvent("Ты становишься «неприкасаемым». Последний шаг:",
                    listOf("Купить СМИ для контроля", "Убить всех свидетелей", "Интегрироваться в элиту"), 2),

                // Уровень 61-70: Глобальный мафиози
                StoryEvent("Теперь ты влияешь на выборы в трёх странах. Метод:",
                    listOf("Хакерские атаки", "Финансирование популистов", "Чёрный пиар"), 1),
                StoryEvent("ЦРУ предлагает сделку: свобода за информацию о конкурентах. Твой выбор:",
                    listOf("Сдам всех", "Притворюсь согласным и сбегу", "Использую их для своих целей"), 2),
                StoryEvent("Ты создаёте частную армию. Зачем?",
                    listOf("Защита активов", "Свержение правительства", "Бизнес на войне"), 0),
                StoryEvent("Блокчейн делает твои транзакции прозрачными. Как обойдёшь?",
                    listOf("Нанёсу 51% атаку", "Перейду на наличные", "Создам свою крипту"), 2),
                StoryEvent("Твой врач диагностирует смертельную болезнь. Твои действия:",
                    listOf("Куплю экспериментальное лечение", "Подставлю другого пациента", "Начну готовить преемника"), 0),
                StoryEvent("Ты покупаете остров для строительства «криминального рая». Законы там:",
                    listOf("Полная анонимность", "Только для избранных", "Фиктивная юрисдикция"), 0),
                StoryEvent("Молодой хакер угрожает раскрыть твои тайны. Как нейтрализуешь?",
                    listOf("Нанёсу DDoS на его серверы", "Предложу $1 млн за молчание", "Убью его семью"), 1),
                StoryEvent("Твой наркотрафик обнаруживает военный спутник. Решение:",
                    listOf("Подкуплю оператора", "Измени маршруты", "Запущу дроны-помехи"), 1),
                StoryEvent("Ты решаешь уйти от дел. Как передашь империю?",
                    listOf("Сыну", "Лучшему бригадиру", "Распущу организацию"), 0),
                StoryEvent("Последний шаг к абсолютной власти:",
                    listOf("Убийство президента", "Контроль над ФРС", "Создание религии"), 1)
            )
        ),
        //endregion

        //region События: Официант -> ресторанный магнат
        StoryPath(
                "От официанта до ресторанного магната",
        "Пройдите путь от подработки в кафе до владения международной сетью ресторанов",
        listOf(
            // Уровень 1-10: Официант-стажёр
            StoryEvent("Твой первый день в маленьком кафе. С чего начнёшь?",
                listOf("Выучу меню наизусть", "Познакомлюсь с коллегами", "Начну сразу обслуживать клиентов"), 0),
            StoryEvent("Клиент жалуется на холодный суп. Твои действия?",
                listOf("Извинюсь и заменю блюдо", "Обвиню повара", "Предложу скидку"), 0),
            StoryEvent("Коллега просит подменить его в выходной. Твой выбор?",
                listOf("Соглашусь без вопросов", "Попрошу доплату", "Откажусь"), 1),
            StoryEvent("Ты заметил, что повар ворует продукты. Что сделаешь?",
                listOf("Доложу владельцу", "Промолчу", "Шантажирую повара"), 0),
            StoryEvent("Группа клиентов не оставляет чаевых. Твоя реакция?",
                listOf("Сделаю вид, что не заметил", "Напомню о чаевых", "Испорчу их следующий заказ"), 0),
            StoryEvent("Ты разлил вино на дорогой костюм гостя. Как поступишь?",
                listOf("Вызову менеджера", "Предложу бесплатную чистку", "Свалю вину на стажера"), 1),
            StoryEvent("Владелец предлагает тебе работать без оформления. Твоё решение?",
                listOf("Соглашусь ради опыта", "Потребую договор", "Уволюсь"), 1),
            StoryEvent("Постоянный клиент предлагает чаевые «в конверте». Твои действия?",
                listOf("Приму с благодарностью", "Откажусь", "Доложу начальству"), 0),
            StoryEvent("Ты нашёл кошелёк с деньгами в зале. Что сделаешь?",
                listOf("Оставлю себе", "Передам администратору", "Верну владельцу лично"), 2),
            StoryEvent("Тебя просят работать в два раза больше за те же деньги. Твой ответ?",
                listOf("Соглашусь ради перспектив", "Потребую повышение", "Уйду в другой ресторан"), 1),

            // Уровень 11-20: Старший официант
            StoryEvent("Тебя повысили до старшего официанта. Первое решение?",
                listOf("Оптимизирую работу зала", "Введу новые стандарты", "Поделюсь знаниями с новичками"), 2),
            StoryEvent("Новый официант постоянно ошибается. Как поступишь?",
                listOf("Пожалуюсь менеджеру", "Проведу обучение", "Переведу на кухню"), 1),
            StoryEvent("Клиент требует блюдо, которого нет в меню. Твои действия?",
                listOf("Откажу", "Предложу альтернативу", "Попрошу повара приготовить"), 2),
            StoryEvent("Коллега ворует твои чаевые. Твоя реакция?",
                listOf("Устрою разборки", "Установлю скрытую камеру", "Поговорю с ним наедине"), 2),
            StoryEvent("Ресторан переходит на электронные чаевые. Твоё мнение?",
                listOf("Поддержу — это прозрачно", "Буду саботировать", "Предложу смешанную систему"), 0),
            StoryEvent("Тебя приглашают на конкурс «Лучший официант города». Участвовать?",
                listOf("Да, это шанс заявить о себе", "Нет, боюсь проиграть", "Пойду как зритель"), 0),
            StoryEvent("Владелец просит придумать новое фирменное блюдо. Твоя идея?",
                listOf("Блюдо по семейному рецепту", "Фьюжн-кухня", "Веганская альтернатива"), 0),
            StoryEvent("Клиент предлагает работу в престижном ресторане. Твой выбор?",
                listOf("Соглашусь сразу", "Изучу условия", "Откажусь из лояльности"), 1),
            StoryEvent("Ты выиграл грант на курсы сомелье. Как воспользуешься?",
                listOf("Пройду обучение", "Продам сертификат", "Отложу на потом"), 0),
            StoryEvent("Ресторан терпит убытки. Твоё предложение?",
                listOf("Ввести кейтеринг", "Сменить концепцию", "Устроить флешмоб в соцсетях"), 2),

            // Уровень 21-30: Управляющий
            StoryEvent("Тебя назначают управляющим. Первый приказ?",
                listOf("Повысить цены", "Обновить меню", "Уволить неэффективных"), 1),
            StoryEvent("Шеф-повар саботирует твои решения. Как поступишь?",
                listOf("Уволю его", "Проведу переговоры", "Найду нового повара за его спиной"), 1),
            StoryEvent("Поставщик предлагает продукты сомнительного качества. Твой выбор?",
                listOf("Куплю — это дешевле", "Откажусь", "Потребую пробную партию"), 2),
            StoryEvent("Критик пишет разгромный отзыв. Твои действия?",
                listOf("Приглашу на ужин за свой счёт", "Оставлю гневный комментарий", "Игнорирую"), 0),
            StoryEvent("Клиент отравился в твоём ресторане. Как реагируешь?",
                listOf("Вызову скорую", "Предложу компенсацию", "Спрячу доказательства"), 0),
            StoryEvent("Конкурент переманивает твоего лучшего бармена. Твой ответ?",
                listOf("Удвою зарплату", "Устрою скандал", "Перемани его шеф-повара"), 0),
            StoryEvent("Ты замечаешь, что кассир ворует. Что сделаешь?",
                listOf("Уволю без объяснений", "Вызову полицию", "Предложу вернуть деньги"), 2),
            StoryEvent("Инвестор предлагает расшириться. Какой формат выберешь?",
                listOf("Франшиза", "Фуд-корт", "Премиальный ресторан"), 0),
            StoryEvent("Сотрудники требуют повышения зарплат. Твоё решение?",
                listOf("Уволю недовольных", "Введу бонусы за эффективность", "Повышу всем"), 1),
            StoryEvent("Твой ресторан попадает в ТОП-10 города. Как отметишь?",
                listOf("Устрою праздник для команды", "Подниму цены", "Запущу рекламную кампанию"), 0),

            // Уровень 31-40: Владелец одного ресторана
            StoryEvent("Ты выкупаешь этот ресторан. Первое изменение?",
                listOf("Ребрендинг", "Новая кухня", "Обучение персонала"), 0),
            StoryEvent("Бывший владелец распускает слухи о тебе. Как реагируешь?",
                listOf("Подам в суд", "Игнорирую", "Раскрою его нарушения"), 2),
            StoryEvent("Твой шеф-повар уезжает за границу. Твои действия?",
                listOf("Перемани звезду из конкурентов", "Продвину своего су-шефа", "Измени концепцию"), 1),
            StoryEvent("Санитарная служба находит нарушения. Как выкрутишься?",
                listOf("Даю взятку", "Срочно исправляю", "Обжалую в суде"), 1),
            StoryEvent("Блогер с миллионной аудиторией приходит без брони. Твоя реакция?",
                listOf("Устрою VIP-обслуживание", "Попрошу подождать", "Откажу из принципа"), 0),
            StoryEvent("Экономический кризис. Как сохранишь бизнес?",
                listOf("Уволю половину штата", "Введу бюджетное меню", "Закроюсь на ремонт"), 1),
            StoryEvent("Ты получаешь предложение о франшизе. Твой выбор?",
                listOf("Продам права за 1 млн", "Открою филиал сам", "Откажусь — боюсь потери качества"), 1),
            StoryEvent("Конкурент копирует твоё фирменное блюдо. Твои действия?",
                listOf("Подам в суд", "Придумаю новое", "Размещу разоблачение в СМИ"), 1),
            StoryEvent("Твой ресторан горит. Страховка покрывает 70%. Что делаешь?",
                listOf("Открываю временное кафе", "Ищу инвесторов", "Вкладываю свои сбережения"), 2),
            StoryEvent("Ты выигрываешь «Ресторан года». Как воспользуешься победой?",
                listOf("Запущу линейку продуктов", "Подниму цены", "Открою кулинарную школу"), 0),

            // Уровень 41-50: Владелец сети (3-5 ресторанов)
            StoryEvent("Ты открываешь второй ресторан. Концепция:",
                listOf("То же, но в другом районе", "Новая кухня", "Фаст-кэжуал"), 2),
            StoryEvent("Менеджер ворует $10 000. Твои действия?",
                listOf("Уволю и забуду", "Вызову полицию", "Заставлю вернуть с процентами"), 1),
            StoryEvent("Звездный шеф требует долю в бизнесе. Твой ответ?",
                listOf("Дам 5%", "Откажу", "Предложу процент с прибыли"), 2),
            StoryEvent("Франчайзи портит твою репутацию. Как поступишь?",
                listOf("Разорву контракт", "Помогу исправиться", "Выкуплю обратно"), 0),
            StoryEvent("Пандемия закрывает рестораны. Твоя стратегия:",
                listOf("Курьерская доставка", "Онлайн-мастер-классы", "Продажа полуфабрикатов"), 0),
            StoryEvent("Критики обвиняют тебя в «массовости». Твоя реакция?",
                listOf("Открою элитный проект", "Игнорирую", "Использую это в рекламе"), 0),
            StoryEvent("Твой поставщик продуктов мошенничает. Твой ход:",
                listOf("Создам свою ферму", "Найду нового", "Подам в суд"), 1),
            StoryEvent("Ты выходишь на международный уровень. Первая страна:",
                listOf("Дубай", "Париж", "Токио"), 2),
            StoryEvent("Инвестор предлагает $10 млн за 50% доли. Твоё решение?",
                listOf("Откажусь", "Продам 20%", "Возьму деньги и выкуплю позже"), 1),
            StoryEvent("Твоя сеть становится брендом. Что запустишь?",
                listOf("Линию кухонной техники", "Кулинарное шоу", "Свой фестиваль еды"), 1),

            // Уровень 51-60: Региональный лидер
            StoryEvent("Теперь у тебя 10+ заведений. Как управляешь?",
                listOf("Жёсткий централизованный контроль", "Даю свободу управляющим", "Автоматизированные системы"), 2),
            StoryEvent("Министр предлагает «крышу» за долю. Твои действия?",
                listOf("Соглашусь", "Запишу разговор", "Откажусь и усилю безопасность"), 2),
            StoryEvent("СМИ обвиняют тебя в эксплуатации персонала. Твой ответ:",
                listOf("Проведу PR-кампанию", "Улучшу условия труда", "Подкуплю журналистов"), 1),
            StoryEvent("Ты внедряешь роботов-официантов. Реакция команды:",
                listOf("Саботаж", "Приняли", "Потребовали переобучения"), 1),
            StoryEvent("Акции твоей компании падают. Как исправишь ситуацию?",
                listOf("Выкуплю свои же акции", "Раскрою новые проекты", "Сменю CEO"), 1),
            StoryEvent("Эко-активисты пикетируют твои рестораны. Твои действия?",
                listOf("Перейду на локальные продукты", "Закажу антипиар", "Проигнорирую"), 0),
            StoryEvent("Ты покупаешь виноградник в Италии. Зачем?",
                listOf("Эксклюзивное вино для сети", "Инвестиция", "Личный статус"), 0),
            StoryEvent("Конкурент копирует всю твою концепцию. Твой ход:",
                listOf("Куплю его бизнес", "Подсучу иск о патентах", "Придумаю нечто революционное"), 2),
            StoryEvent("Ты запускаешь благотворительный фонд. Направление:",
                listOf("Борьба с голодом", "Обучение поваров", "Поддержка фермеров"), 0),
            StoryEvent("Твой бренд становится символом города. Что дальше?",
                listOf("Выход на биржу", "Глобальная экспансия", "Создание гастрономической академии"), 2),

            // Уровень 61-70: Национальный лидер
            StoryEvent("Теперь ты контролируешь 30% рынка. Как избежишь монополии?",
                listOf("Создам дочерние бренды", "Лоббирую законы", "Подкуплю регуляторов"), 0),
            StoryEvent("Правительство предлагает стать министром пищепрома. Твой выбор?",
                listOf("Соглашусь", "Откажусь", "Займу должность неофициально"), 2),
            StoryEvent("Кибератака парализует твои системы. Твои действия?",
                listOf("Заплачу выкуп", "Нану хакеров для контратаки", "Восстановлю из резервных копий"), 2),
            StoryEvent("Ты вводишь «умные» кухни с ИИ. Риски:",
                listOf("Утечки данных", "Потеря «души» кухни", "Техногенные сбои"), 1),
            StoryEvent("Твой ребёнок отказывается наследовать бизнес. Твоя реакция:",
                listOf("Заставлю", "Продам долю инвесторам", "Создам фонд для управления"), 2),
            StoryEvent("Кулинарный критик называет тебя «убийцей гастрономии». Ответ:",
                listOf("Приглашу его на закрытый ужин", "Куплю его блог", "Поддержу молодых шефов в ответ"), 2),
            StoryEvent("Ты выпускаешь свою криптовалюту для сети. Зачем?",
                listOf("Бонусная программа", "Отмыв денег", "Эксперимент"), 0),
            StoryEvent("Твой гендиректор сливает планы конкурентам. Как накажешь?",
                listOf("Уволю с «волчьим билетом»", "Подставлю под суд", "Использую для дезы"), 1),
            StoryEvent("Ты открываешь ресторан на Луне (да, уже возможно). Инвесторы:",
                listOf("Космические агентства", "Частные миллиардеры", "Краудфандинг"), 0),
            StoryEvent("Ты становишься героем Forbes. Главная цитата:",
                listOf("«Еда — это искусство»", "«Я продаю эмоции»", "«Деньги пахнут трюфелями»"), 1),

            // Уровень 71-80: Международный магнат
            StoryEvent("Твоя сеть в 50+ странах. Как поддерживаешь качество?",
                listOf("Жёсткие стандарты", "Локальные шефы", "Таинственные гости"), 0),
            StoryEvent("Война в стране закрывает твои рестораны. Твои действия?",
                listOf("Организую гумпомощь", "Эвакуирую персонал", "Использую для PR"), 0),
            StoryEvent("Ты покупаешь футбольный клуб. Связь с брендом:",
                listOf("Кейтеринг на стадионах", "Имя на форме", "Гастро-мерч"), 1),
            StoryEvent("ИИ создаёт идеальное меню. Ты внедряешь его?",
                listOf("Да, полностью", "Только как помощник", "Нет — это убивает творчество"), 1),
            StoryEvent("Ты обнаруживаешь, что твой продукт вызывает зависимость. Что делаешь?",
                listOf("Скрываю исследования", "Меняю рецептуру", "Делаю фишку"), 1),
            StoryEvent("Каннибалы используют твой ресторан для встреч. Твоя реакция:",
                listOf("Сотрудничаю с полицией", "Игнорирую", "Использую в черном пиаре"), 0),
            StoryEvent("Ты создаёте «вечную» еду. Потенциал:",
                listOf("Для космоса", "Для бедных стран", "Как арт-проект"), 0),
            StoryEvent("Твой шеф становится президентом маленькой страны. Твои действия:",
                listOf("Открываю там экокурорт", "Делаю его лицом бренда", "Дистанцируюсь"), 2),
            StoryEvent("Ты получаешь Нобелевскую премию за вклад в…",
                listOf("Борьбу с голодом", "Инновации", "Миротворчество"), 0),
            StoryEvent("Ты решаешь уйти из бизнеса. Наследник:",
                listOf("ИИ-управляющий", "Благотворительный фонд", "Дальний родственник"), 1),

            // Уровень 81-90: Легенда индустрии
            StoryEvent("Твоё имя стало нарицательным. Как защитишь бренд?",
                listOf("Запатентую всё", "Создам религию еды", "Напишу автобиографию"), 0),
            StoryEvent("Учёные клонируют тебя. Клон хочет возглавить компанию. Твои чувства:",
                listOf("Гордость", "Ужас", "Конкуренция"), 0),
            StoryEvent("Ты открываешь ресторан в виртуальной реальности. Концепция:",
                listOf("Еда, которую нельзя приготовить в реале", "Исторические кухни", "Космическая гастрономия"), 1),
            StoryEvent("Ты изобретаешь «эликсир бессмертия» на основе кухни. Что делаешь?",
                listOf("Продаю за $1 млн/доза", "Дарую человечеству", "Храню для избранных"), 1),
            StoryEvent("Инопланетяне просят открыть ресторан на их планете. Твой ответ:",
                listOf("Да, но с земными ингредиентами", "Только если они поделятся технологиями", "Это нарушит галактический закон"), 0),
            StoryEvent("Ты становишься персонажем видеоигры. Сюжет:",
                listOf("Кулинарный квест", "Ресторанный симулятор", "Бизнес-триллер с убийствами"), 2),
            StoryEvent("Твои рестораны объявлены «культурным наследием». Твои действия:",
                listOf("Создам музей", "Запущу образовательную программу", "Продам государству"), 0),
            StoryEvent("Ты обнаруживаешь, что твоя еда лечит рак. Как распространишь?",
                listOf("Через аптеки", "Бесплатно для больных", "Как дорогой деликатес"), 1),
            StoryEvent("Ты решаешь изменить пищевую индустрию. Инструмент:",
                listOf("Политические лобби", "Революционный продукт", "Социальные движения"), 1),
            StoryEvent("Ты пишешь письмо себе 20-летнему. Главный совет:",
                listOf("Верь в себя", "Не бойся рисковать", "Чаевые — это важно"), 2),

            // Уровень 91-100: Владелец гастрономической империи
            StoryEvent("Ты контролируешь 5% мирового пищепрома. Философия:",
                listOf("Еда объединяет", "Прибыль — это вкусно", "Власть через желудок"), 0),
            StoryEvent("Ты создаёте город будущего. Его особенность:",
                listOf("Все здания — рестораны", "Еда вместо денег", "ИИ-шефы в каждом доме"), 1),
            StoryEvent("Человечество колонизирует Марс. Твоя роль:",
                listOf("Официальный поставщик NASA", "Создаю марсианскую кухню", "Открываю первый ресторан в куполе"), 2),
            StoryEvent("Ты живёшь 200 лет благодаря своей диете. Секрет:",
                listOf("Кровь единорогов", "Нанороботы в трюфелях", "Это маркетинг"), 2),
            StoryEvent("Ты превращаешь свою компанию в государство. Валюта:",
                listOf("Каллории", "Рецепты", "Отзывы"), 0),
            StoryEvent("Ты избираешься президентом Земли. Первый указ:",
                listOf("Запрет фастфуда", "Всеобщая гастрономическая грамотность", "Еда — бесплатная"), 1),
            StoryEvent("Ты открываешь портал в другие вселенные. Первый ресторан там:",
                listOf("Для демонов", "Для эльфов", "Для ктулху"), 0),
            StoryEvent("Боги приглашают тебя на Олимп готовить амброзию. Условие:",
                listOf("Отдать рецепт бессмертия", "Стать богом еды", "Отказаться от земного"), 1),
            StoryEvent("Ты переписываешь законы физики через кулинарию. Открытие:",
                listOf("Чёрная дыра — это блин", "Время — это бульон", "Любовь пахнет корицей"), 2),
            StoryEvent("Ты завершаешь карьеру. Последний проект:",
                listOf("Капсула с едой для потомков", "Книга «100 лет у плиты»", "Секретная кухня в Антарктиде"), 0)
        )
    ),
        //endregion

        //region События: маникюрщица -> королева beauty-индустрии
        StoryPath(
                "От маникюрщицы до королевы beauty-индустрии",
        "Пройдите путь от подработки на дому до управления международной сетью салонов красоты",
        listOf(
            // Уровень 1-10: Начинающий мастер
            StoryEvent("Твой первый клиент — подруга просит сделать маникюр. Твои действия?",
                listOf("Потренируюсь на типсах", "Сделаю бесплатно для опыта", "Возьму символическую плату"), 1),
            StoryEvent("Клиентка недовольна формой ногтей. Как поступишь?",
                listOf("Переделаю бесплатно", "Объясню, что это модно", "Предложу скидку на следующий раз"), 0),
            StoryEvent("Ты случайно порезала клиентку. Что сделаешь?",
                listOf("Извинюсь и обработаю ранку", "Свалю вину на плохие инструменты", "Предложу бесплатную процедуру"), 0),
            StoryEvent("Подруга просит подделать диплом мастера. Твой выбор?",
                listOf("Откажусь", "Помогу найти курсы", "Сделаю за деньги"), 0),
            StoryEvent("Клиентка хочет дизайн, который ты не умеешь. Твоя реакция?",
                listOf("Откажусь", "Попробую сделать", "Совру, что это легко"), 1),
            StoryEvent("Ты нашла дешёвые поддельные лаки. Купишь?",
                listOf("Да, для тренировки", "Нет, только оригиналы", "Куплю, но предупрежу клиентов"), 1),
            StoryEvent("Постоянная клиентка просит скидку. Твоё решение?",
                listOf("Сделаю скидку 10%", "Предложу бонусную карту", "Откажу — цены и так низкие"), 1),
            StoryEvent("Ты замечаешь грибок у клиентки. Как поступишь?",
                listOf("Отправлю к врачу", "Сделаю маникюр как обычно", "Посоветую аптечное средство"), 0),
            StoryEvent("Клиентка предлагает чаевые «мимо кассы». Твои действия?",
                listOf("Приму с благодарностью", "Откажусь", "Предложу официальный бонус"), 2),
            StoryEvent("Хозяин квартиры против домашнего салона. Твой выход?",
                listOf("Сниму койко-место", "Буду работать нелегально", "Организую выездной сервис"), 2),

            // Уровень 11-20: Профессиональный мастер
            StoryEvent("Ты получила официальный диплом. Первое решение?",
                listOf("Повысить цены", "Закупить профессиональные инструменты", "Завести соцсети"), 2),
            StoryEvent("Клиентка требует вернуть деньги за неидеальный дизайн. Твои действия?",
                listOf("Верну часть суммы", "Предложу исправить", "Откажу — претензии необоснованны"), 1),
            StoryEvent("Конкурентка распускает слухи о твоей нечистоплотности. Как ответишь?",
                listOf("Публикую сертификаты", "Игнорирую", "Расскажу о её нарушениях"), 0),
            StoryEvent("Санитарная служба требует лицензию. Твой ход?",
                listOf("Даю взятку", "Оформляю документы", "Временно закрываюсь"), 1),
            StoryEvent("Ты выиграла конкурс мастеров. Как использовать победу?",
                listOf("Создам обучающий курс", "Подниму цены", "Придумаю авторский дизайн"), 0),
            StoryEvent("Поставщик предлагает контрафактные гель-лаки. Твой выбор?",
                listOf("Куплю — они дешевле", "Откажусь", "Проверю сертификаты"), 2),
            StoryEvent("Клиентка хочет экстремальный дизайн, который может испортить ногти. Твоё решение?",
                listOf("Откажусь", "Предложу безопасную альтернативу", "Сделаю за дополнительную плату"), 1),
            StoryEvent("Ты замечаешь, что ассистентка ворует материалы. Как поступишь?",
                listOf("Уволю сразу", "Проведу беседу", "Установлю камеры"), 1),
            StoryEvent("Инстаграм заблокировал твой аккаунт с работами. Что делаешь?",
                listOf("Создам новый", "Подам апелляцию", "Перейду в TikTok"), 1),
            StoryEvent("Ты накопила на первое помещение. Выбираешь:",
                listOf("Подвал в центре", "Торговый центр", "Салон на дому"), 1),

            // Уровень 21-30: Владелец маленького салона
            StoryEvent("Твой первый салон открыт! Первое правило для сотрудников?",
                listOf("Стерильность — прежде всего", "Клиент всегда прав", "Только авторские дизайны"), 0),
            StoryEvent("Мастер уходит к конкурентам, забирая клиентов. Твои действия?",
                listOf("Подам в суд", "Улучшу условия для команды", "Переманю её клиентов обратно"), 1),
            StoryEvent("Клиентка утверждает, что получила инфекцию у тебя. Как реагируешь?",
                listOf("Оплачу лечение", "Потребую доказательства", "Обвиню её в несоблюдении ухода"), 0),
            StoryEvent("Блогер с миллионной аудиторией хочет бесплатный маникюр за рекламу. Твой выбор?",
                listOf("Соглашусь", "Предложу скидку 50%", "Откажу — реклама должна оплачиваться"), 2),
            StoryEvent("Кризис: клиентов стало меньше. Твоя стратегия?",
                listOf("Акции и скидки", "Уволю часть персонала", "Расширю список услуг"), 0),
            StoryEvent("Ты обнаруживаешь, что бухгалтер ворует. Что делаешь?",
                listOf("Уволю и забуду", "Вызову полицию", "Потребую вернуть деньги"), 2),
            StoryEvent("Конкурент копирует твою уникальную технику. Твой ответ?",
                listOf("Подам в суд", "Придумаю что-то новое", "Опубликую разоблачение"), 1),
            StoryEvent("Ты выходишь в топ городских салонов. Как отметишь?",
                listOf("Праздник для команды", "Новая премиальная линия", "Благотворительный мастер-класс"), 0),
            StoryEvent("Инвестор предлагает расширение. На что согласишься?",
                listOf("Франшиза", "Большой салон", "Обучение мастеров"), 0),
            StoryEvent("Пожар уничтожает половину салона. Страховка покрывает 60%. Твой план?",
                listOf("Возьму кредит", "Открою временный мини-салон", "Попрошу помощи у клиентов"), 1),

            // Уровень 31-40: Владелец сети (3-5 салонов)
            StoryEvent("Ты открываешь второй салон. Концепция:",
                listOf("Премиум-уровень", "Бюджетный вариант", "Узкая специализация (например, wedding)"), 2),
            StoryEvent("Топ-мастер требует долю в бизнесе. Твой ответ?",
                listOf("Предложу процент с прибыли", "Откажу", "Уволю её"), 0),
            StoryEvent("Франчайзи салона портит твою репутацию. Как поступишь?",
                listOf("Разорву контракт", "Помогу исправить ситуацию", "Выкуплю обратно"), 0),
            StoryEvent("Пандемия: салоны закрыты. Как зарабатываешь?",
                listOf("Выездные услуги", "Онлайн-курсы", "Продажа наборов для дома"), 1),
            StoryEvent("Журнал обвиняет тебя в использовании небезопасных материалов. Твоя реакция?",
                listOf("Опубликую опровержение", "Проведу проверку", "Подам в суд"), 1),
            StoryEvent("Твой бренд выходит на международный уровень. Первая страна:",
                listOf("Дубай", "Париж", "Москва"), 0),
            StoryEvent("Звезда Голливуда просит стать личным мастером. Твои условия?",
                listOf("Только если она станет лицом бренда", "Откажу — не хочу переезжать", "За огромный гонорар"), 0),
            StoryEvent("Ты запускаешь свою линию лаков. Уникальное предложение:",
                listOf("Экологичный состав", "Нестираемое покрытие", "Дизайнерские коллаборации"), 0),
            StoryEvent("Сотрудники объединяются в профсоюз. Твоя позиция?",
                listOf("Поддержу инициативу", "Распущу его", "Предложу альтернативу"), 0),
            StoryEvent("Твоя сеть попадает в ТОП страны. Следующий шаг?",
                listOf("Выход на биржу", "Собственный институт красоты", "Глобальная экспансия"), 1),

            // Уровень 41-50: Региональный лидер
            StoryEvent("Теперь у тебя 10+ салонов. Как управляешь?",
                listOf("Жёсткий контроль", "Автономность филиалов", "ИИ-системы"), 2),
            StoryEvent("Чиновник требует взятку за разрешение. Твои действия?",
                listOf("Заплачу", "Запишу на диктофон", "Найду лазейку в законах"), 1),
            StoryEvent("Скандал: мастер дискриминировал клиента. Как разрешишь ситуацию?",
                listOf("Уволю виновника", "Проведу тренинги", "Запущу PR-кампанию"), 1),
            StoryEvent("Ты внедряешь роботов-маникюрщиков. Реакция команды?",
                listOf("Саботаж", "Приняли как помощь", "Потребовали переобучения"), 1),
            StoryEvent("Кризис: прибыль падает. Твоё решение?",
                listOf("Закрою убыточные филиалы", "Ребрендинг", "Новые нишевые услуги"), 2),
            StoryEvent("Ты покупаешь косметическую лабораторию. Зачем?",
                listOf("Собственная линейка продуктов", "Исследования", "Контроль качества"), 0),
            StoryEvent("Конкурент копирует всю твою концепцию. Твой ход?",
                listOf("Куплю его сеть", "Подам в суд", "Создам нечто уникальное"), 2),
            StoryEvent("Ты запускаешь благотворительный фонд. Направление:",
                listOf("Обучение бездомных", "Помощь онкобольным", "Экология"), 1),
            StoryEvent("Твой бренд становится символом города. Что дальше?",
                listOf("Музей красоты", "Международная экспансия", "Политика"), 1),
            StoryEvent("Тебя приглашают в совет по предпринимательству. Твоя цель там?",
                listOf("Лоббирование интересов", "Обмен опытом", "Повышение стандартов"), 2),

            // Уровень 51-60: Национальный лидер
            StoryEvent("Ты контролируешь 30% рынка. Как избежишь монополии?",
                listOf("Создам дочерние бренды", "Войду в госрегулирование", "Добровольно ограничу экспансию"), 0),
            StoryEvent("Минздрав предлагает возглавить комитет по стандартам красоты. Твой выбор?",
                listOf("Соглашусь", "Откажусь", "Займу должность неофициально"), 0),
            StoryEvent("Хакеры украли базу клиентов. Твои действия?",
                listOf("Заплачу выкуп", "Обращусь в киберполицию", "Проигнорирую"), 1),
            StoryEvent("Ты внедряешь ИИ для подбора дизайнов. Риски:",
                listOf("Потеря индивидуальности", "Утечки данных", "Бунт мастеров"), 0),
            StoryEvent("Твой ребёнок не хочет наследовать бизнес. Твоя реакция?",
                listOf("Назначу CEO со стороны", "Заставлю", "Продам долю инвесторам"), 0),
            StoryEvent("Журналисты обвиняют тебя в нереалистичных стандартах красоты. Твой ответ?",
                listOf("Запущу «натуральную» линию", "Подам в суд", "Игнорирую"), 0),
            StoryEvent("Ты выпускаешь NFT-дизайны ногтей. Зачем?",
                listOf("Эксперимент", "Привлечение молодежи", "Отмыв денег"), 1),
            StoryEvent("Твой гендиректор сливает планы конкурентам. Как накажешь?",
                listOf("Уволю с «волчьим билетом»", "Использую для дезинформации", "Прощу"), 1),
            StoryEvent("Ты открываешь салон на МКС. Инвесторы:",
                listOf("Космические агентства", "Частные компании", "Краудфандинг"), 0),
            StoryEvent("Ты становишься героем Forbes. Главная цитата:",
                listOf("«Красота — это свобода»", "«Я продаю уверенность»", "«Ногти — это холст»"), 1),

            // Уровень 61-70: Международный магнат
            StoryEvent("Твоя сеть в 50+ странах. Как поддерживаешь качество?",
                listOf("Единые стандарты", "Локальные адаптации", "Таинственные клиенты"), 0),
            StoryEvent("Война в стране закрывает твои салоны. Твои действия?",
                listOf("Организую помощь беженцам", "Эвакуирую персонал", "Жду окончания конфликта"), 0),
            StoryEvent("Ты покупаешь футбольный клуб. Связь с брендом?",
                listOf("Бьюти-комнаты на стадионах", "Лого на форме", "Спецдизайн для женской команды"), 2),
            StoryEvent("ИИ создаёт идеальный маникюр. Ты внедряешь его?",
                listOf("Да, полностью", "Только как помощник", "Нет — это убивает творчество"), 1),
            StoryEvent("Ты обнаруживаешь, что твои лаки вызывают зависимость. Что делаешь?",
                listOf("Скрываю исследования", "Меняю формулу", "Делаю фишку"), 1),
            StoryEvent("Ты создаёшь «вечный» маникюр. Патентуешь?",
                listOf("Да, и продаю лицензии", "Выложу в открытый доступ", "Оставлю для VIP-клиентов"), 0),
            StoryEvent("Твой топ-мастер становится министром культуры. Твои действия?",
                listOf("Делаю его лицом бренда", "Дистанцируюсь", "Открываю салон при министерстве"), 1),
            StoryEvent("Ты получаешь Нобелевскую премию за вклад в…",
                listOf("Экологию", "Технологии", "Социальную справедливость"), 0),
            StoryEvent("Ты решаешь уйти из оперативного управления. Наследник:",
                listOf("ИИ-система", "Благотворительный фонд", "Бывший конкурент"), 0),

            // Уровень 71-80: Легенда индустрии
            StoryEvent("Твоё имя стало синонимом маникюра. Как защитишь бренд?",
                listOf("Запатентую всё", "Напишу автобиографию", "Создам религию красоты"), 1),
            StoryEvent("Учёные клонируют тебя. Клон хочет возглавить компанию. Твои чувства:",
                listOf("Гордость", "Ужас", "Конкуренция"), 0),
            StoryEvent("Ты открываешь салон в метавселенной. Концепция:",
                listOf("Невозможные дизайны", "Исторические стили", "Красота для аватаров"), 0),
            StoryEvent("Ты изобретаешь «эликсир красоты». Что делаешь?",
                listOf("Продаю за $1 млн/флакон", "Дарую человечеству", "Храню для избранных"), 1),
            StoryEvent("Инопланетяне просят открыть салон на их планете. Твой ответ:",
                listOf("Да, с земными стандартами", "Только за технологии", "Откажу — это риск"), 0),
            StoryEvent("Ты становишься персонажем игры. Сюжет:",
                listOf("Симулятор маникюра", "Бизнес-стратегия", "Детектив с отравленным лаком"), 2),
            StoryEvent("Твои салоны объявлены «культурным наследием». Твои действия?",
                listOf("Создам музей", "Запущу образовательную программу", "Продам государству"), 0),
            StoryEvent("Ты обнаруживаешь, что твои процедуры продлевают жизнь. Как распространишь?",
                listOf("Через клиники", "Бесплатно для пенсионеров", "Как роскошную услугу"), 1),
            StoryEvent("Ты решаешь изменить индустрию красоты. Инструмент:",
                listOf("Политическое лобби", "Революционный продукт", "Социальные движения"), 1),
            StoryEvent("Ты пишешь письмо себе 20-летней. Главный совет:",
                listOf("Верь в себя", "Не экономь на обучении", "Клиент важнее денег"), 0),

            // Уровень 81-90: Владелец beauty-империи
            StoryEvent("Ты контролируешь 5% мирового beauty-рынка. Философия:",
                listOf("Красота — это право", "Прибыль — это красиво", "Власть через эстетику"), 0),
            StoryEvent("Ты создаёшь город будущего. Его особенность:",
                listOf("Все здания — салоны красоты", "Красота вместо денег", "ИИ-стилисты в каждом доме"), 1),
            StoryEvent("Человечество колонизирует Марс. Твоя роль:",
                listOf("Официальный поставщик NASA", "Создаю космическую beauty-линию", "Открываю первый салон в куполе"), 2),
            StoryEvent("Ты живёшь 200 лет благодаря своим процедурам. Секрет:",
                listOf("Стволовые клетки в лаках", "Нанороботы в гелях", "Это маркетинг"), 2),
            StoryEvent("Ты превращаешь компанию в государство. Валюта:",
                listOf("Процедуры", "Дизайны", "Отзывы"), 0),
            StoryEvent("Ты избираешься президентом Земли. Первый указ:",
                listOf("Ежедневный маникюр — обязательно", "Всеобщая beauty-грамотность", "Красота — бесплатная"), 1),
            StoryEvent("Ты открываешь портал в другие вселенные. Первый салон там:",
                listOf("Для вампиров", "Для фей", "Для роботов"), 0),
            StoryEvent("Богини красоты приглашают тебя на Олимп. Условие:",
                listOf("Отдать секрет вечной молодости", "Стать богиней маникюра", "Отказаться от земного"), 1),
            StoryEvent("Ты переписываешь законы физики через beauty-призму. Открытие:",
                listOf("Чёрная дыра — это чёрный лак", "Время — это гель", "Любовь пахнет смывкой"), 2),
            StoryEvent("Ты завершаешь карьеру. Последний проект:",
                listOf("Капсула с дизайнами для потомков", "Книга «200 лет у кутикулы»", "Секретный салон в Антарктиде"), 0)
        )
    ),
        //endregion

        //region События: швея-самоучка -> модный дизайнер
        StoryPath(
            "От швейной машинки до подиумов Парижа",
            "Пройдите путь от перешивания старых вещей до создания модной империи",
            listOf(
                // Уровень 1-10: Начинающая швея
                StoryEvent("Твой первый заказ - подруга просит перешить платье. Как поступишь?",
                    listOf("Возьмусь бесплатно для практики", "Попрошу 500 рублей", "Откажусь - боюсь испортить"), 1),
                StoryEvent("Клиентка недовольна подолом - он получился неровным. Твои действия?",
                    listOf("Переделаю за свой счет", "Объясню, что это винтажный стиль", "Предложу скидку на следующую вещь"), 0),
                StoryEvent("Мама дарит тебе старую швейную машинку. Что сделаешь в первую очередь?",
                    listOf("Починю сама", "Отнесу в мастерскую", "Продам и куплю новую"), 0),
                StoryEvent("На рынке предлагают дешевые ткани сомнительного качества. Купишь?",
                    listOf("Да, для тренировки", "Нет, только хорошие материалы", "Куплю, но предупрежу клиентов"), 1),
                StoryEvent("Подруга просит скопировать дизайнерское платье. Твой выбор?",
                    listOf("Откажусь - это незаконно", "Сделаю с изменениями", "Создам похожее, но дешевле"), 0),
                StoryEvent("Ты случайно испортила дорогую ткань заказчицы. Как поступишь?",
                    listOf("Куплю новую за свой счет", "Спрячу дефект", "Свалю вину на плохую ткань"), 0),
                StoryEvent("Постоянный клиент предлагает работать без чека. Твоя реакция?",
                    listOf("Соглашусь", "Откажусь", "Предложу небольшую скидку за наличные"), 1),
                StoryEvent("Конкурентка копирует твои фасоны. Что сделаешь?",
                    listOf("Публично обвиню", "Придумаю более сложные модели", "Игнорирую"), 1),
                StoryEvent("Ты нашла в комиссионке настоящий Chanel за копейки. Твои действия?",
                    listOf("Куплю для вдохновения", "Перепродам дороже", "Отдам на экспертизу"), 0),
                StoryEvent("Первая крупная работа - свадебное платье. Берешься?",
                    listOf("Да, это вызов", "Только с помощником", "Откажусь - слишком ответственно"), 0),

                // Уровень 11-20: Профессиональная портниха
                StoryEvent("Ты открываешь маленький ателье. Первое правило для клиентов?",
                    listOf("Предоплата 50%", "Строгие сроки", "Никаких копий брендов"), 2),
                StoryEvent("Клиентка плачет на примерке - платье ей не идет. Твой выход?",
                    listOf("Предложу переделать", "Верну деньги", "Найду стилиста для консультации"), 2),
                StoryEvent("Модный блогер хочет бесплатный наряд за рекламу. Согласишься?",
                    listOf("Да, если будет 5 постов", "Нет, моя работа стоит денег", "Только обмен на рекламу"), 1),
                StoryEvent("Поставщик предлагает контрафактный шелк. Твой выбор?",
                    listOf("Куплю - клиенты не заметят", "Откажусь", "Попрошу сертификаты"), 2),
                StoryEvent("Твой дизайн случайно попадает в модный журнал. Как воспользуешься?",
                    listOf("Напишу редактору", "Добавлю в портфолио", "Испугаюсь и промолчу"), 0),
                StoryEvent("Бывшая сотрудница уносит твои выкройки. Твои действия?",
                    listOf("Подам в суд", "Создам новые", "Расскажу всем в инстаграме"), 1),
                StoryEvent("Клиент требует вернуть деньги за опоздание на 2 дня. Твое решение?",
                    listOf("Верну часть суммы", "Предложу бонус", "Откажу - сроки в договоре"), 2),
                StoryEvent("Ты выигрываешь местный конкурс дизайнеров. Что дальше?",
                    listOf("Открою курс", "Создам сайт", "Попрошу инвестиции"), 1),
                StoryEvent("Магазин предлагает продавать твои вещи с наценкой 300%. Твоя реакция?",
                    listOf("Соглашусь", "Потребую справедливую цену", "Открою свой магазин"), 2),
                StoryEvent("Популярная певица хочет эксклюзивное платье за сутки. Берешься?",
                    listOf("Да, это шанс", "Только за двойную оплату", "Откажу - не хочу халтурить"), 0),

                // Уровень 21-30: Начинающий дизайнер
                StoryEvent("Твой первый показ на местной неделе моды. Кого пригласишь?",
                    listOf("Всех клиентов", "Только прессу", "Купивших билеты"), 1),
                StoryEvent("Модель падает на подиуме - платье рвется. Твоя реакция?",
                    listOf("Выйду извиняться", "Пошлю запасное", "Обвиню модель"), 1),
                StoryEvent("Журналист называет твою коллекцию 'безвкусной'. Как ответишь?",
                    listOf("Поблагодарю за мнение", "Напишу гневный пост", "Пришлю новую вещь в подарок"), 0),
                StoryEvent("Фабрика предлагает массовое производство, но удешевить материалы. Твой выбор?",
                    listOf("Соглашусь ради масштаба", "Откажусь", "Создам две линии"), 1),
                StoryEvent("Ты замечаешь, что ассистент ворует ткани. Как поступишь?",
                    listOf("Уволю без разговоров", "Проведу беседу", "Вычту из зарплаты"), 1),
                StoryEvent("Знаменитость появляется в твоем платье на красной дорожке. Твои действия?",
                    listOf("Выложу в соцсети", "Пришлю благодарность", "Попрошу упоминание бренда"), 2),
                StoryEvent("Конкурент предлагает объединить бренды. Твое решение?",
                    listOf("Соглашусь", "Откажусь", "Предложу коллаборацию"), 2),
                StoryEvent("Эко-активисты критикуют использование меха. Твой ответ?",
                    listOf("Откажусь от меха", "Использую искусственный", "Игнорирую"), 0),
                StoryEvent("Твой аккаунт взламывают и удаляют все фото работ. Что делаешь?",
                    listOf("Восстановлю из бэкапа", "Обращусь в полицию", "Создам новый стиль"), 0),
                StoryEvent("Инвестор предлагает 10 млн за 51% бизнеса. Согласишься?",
                    listOf("Да", "Нет", "Предложу 30%"), 2),

                // Уровень 31-40: Узнаваемый бренд
                StoryEvent("Твой бренд попадает в модный бутик за границей. Первая страна:",
                    listOf("Франция", "Япония", "ОАЭ"), 0),
                StoryEvent("Звезда требует бесплатные вещи 'для промо'. Твоя позиция?",
                    listOf("Дам за репосты", "Откажу", "Предложу аренду"), 1),
                StoryEvent("Фальшивки твоего бренда заполонили рынок. Твои действия?",
                    listOf("Подам в суд", "Создам доступную линию", "Использую в рекламе"), 0),
                StoryEvent("Кризис: продажи упали. Как спасешь бизнес?",
                    listOf("Уволю часть команды", "Запущу распродажу", "Создам бюджетную коллекцию"), 2),
                StoryEvent("Журнал Vogue хочет съемку. Но требует эксклюзив. Твой выбор?",
                    listOf("Соглашусь", "Откажу", "Предложу другие условия"), 2),
                StoryEvent("Ты выигрываешь 'Дизайнера года'. Как отметишь?",
                    listOf("Благотворительным показом", "Праздником для команды", "Повышением цен"), 1),
                StoryEvent("Сотрудники требуют повышения зарплат. Твое решение?",
                    listOf("Уволю недовольных", "Введу премии", "Повышу всем"), 1),
                StoryEvent("Пожар уничтожает часть коллекции. Твой план?",
                    listOf("Возьму кредит", "Запущу краудфандинг", "Использую страховку"), 2),
                StoryEvent("Тебя приглашают судить Project Runway. Участвуешь?",
                    listOf("Да", "Нет", "Только как гость"), 0),
                StoryEvent("Твой логотип обвиняют в плагиате. Как поступишь?",
                    listOf("Поменяю", "Докажу оригинальность", "Подам встречный иск"), 1),

                // Уровень 41-50: Международная известность
                StoryEvent("Ты открываешь flagship store. Где?",
                    listOf("Париж", "Милан", "Нью-Йорк"), 2),
                StoryEvent("Кутюрье дома Dior предлагает совместную коллекцию. Условия?",
                    listOf("Только твое имя", "50/50", "Ты - ассистент"), 1),
                StoryEvent("Франшиза или собственные бутики?",
                    listOf("Франшиза", "Только свои магазины", "Смешанная модель"), 1),
                StoryEvent("Королевская семья заказывает наряд. Но требует полной секретности. Твой ответ?",
                    listOf("Соглашусь", "Откажу", "Попрошу фото для портфолио"), 0),
                StoryEvent("Ты запускаешь линию парфюма. Концепция:",
                    listOf("Устойчивые ингредиенты", "Роскошные ароматы", "Гендерная нейтральность"), 0),
                StoryEvent("Акции твоего бренда падают. Как исправишь?",
                    listOf("Смена CEO", "Коллаборация с масс-маркетом", "Скандальная реклама"), 1),
                StoryEvent("Музей Метрополитен хочет твои работы для выставки. Твои условия?",
                    listOf("Бесплатно", "Только за кредиты", "Продам коллекцию"), 1),
                StoryEvent("Тебя обвиняют в культурной апроприации. Твоя реакция?",
                    listOf("Извинюсь", "Докажу вдохновение", "Игнорирую"), 0),
                StoryEvent("Твой бренд оценивают в $1 млрд. Что дальше?",
                    listOf("Выход на биржу", "Продажа", "Фонд поддержки дизайнеров"), 2),
                StoryEvent("Тебя приглашают преподавать в Центральный Сен-Мартин. Твой выбор?",
                    listOf("Да", "Нет", "Только мастер-классы"), 0)
            )
        ),
        //endregion

        //region События: танцовщица Tik Tok -> мировой хореограф
                StoryPath(
                "От TikTok-челленджей до мировых сцен",
        "Пройдите путь от домашних танцевальных роликов до хореографии для топ-артистов",
        listOf(
            // Уровень 1-10: Начинающая танцовщица (1-10)
            StoryEvent("Твой первый вирусный ролик набрал 50k просмотров. Что делаешь?",
                listOf("Снимаю продолжение", "Прошу друзей помочь с раскруткой", "Удаляю - стесняюсь"), 0),
            StoryEvent("Подруга говорит, что ты копируешь чужие движения. Твоя реакция?",
                listOf("Начну придумывать свои", "Докажу, что это не так", "Перестану танцевать"), 0),
            StoryEvent("Травма колена - врач запрещает тренировки на месяц. Твои действия?",
                listOf("Танцую через боль", "Развиваю верх тела", "Снимаю теорию танцев"), 1),
            StoryEvent("Незнакомец в сети предлагает деньги за приватное видео. Как ответишь?",
                listOf("Отправлю счёт за съёмку", "Заблокирую", "Попрошу рекомендации"), 1),
            StoryEvent("Родители против 'бесперспективных' танцев. Твой выбор?",
                listOf("Докажу, что это работа", "Буду заниматься тайно", "Брошу"), 0),
            StoryEvent("Первая платная коллаборация - $100 за танец в чужом клипе. Согласишься?",
                listOf("Да, это опыт", "Нет, это дёшево", "Попрошу 15% с просмотров"), 0),
            StoryEvent("Ты случайно 'заимствовала' движение у известной танцовщицы. Как поступишь?",
                listOf("Упомяну её в описании", "Переделаю хореографию", "Сделаю вид, что не заметила"), 0),
            StoryEvent("Менеджер предлагает изменить стиль для большей популярности. Твоё решение?",
                listOf("Попробую", "Останусь верной себе", "Создам альтернативный аккаунт"), 1),
            StoryEvent("Тренер говорит, что у тебя 'нет данных'. Что сделаешь?",
                listOf("Докажу, что он не прав", "Найду другого тренера", "Уйду в теорию танца"), 0),
            StoryEvent("Первые 10k подписчиков. Как отпразднуешь?",
                listOf("Прямой эфир с обучением", "Молчу и работаю дальше", "Попрошу донаты"), 0),

            // Уровень 11-20: Микрозвезда соцсетей (11-20)
            StoryEvent("Бренд спортивной одежды предлагает бартер. Твои условия?",
                listOf("Только деньги", "Одежда + 30% с продаж", "Бесплатно за упоминание"), 1),
            StoryEvent("Твой танец используют без кредита. Твои действия?",
                listOf("Потребую упоминания", "Проигнорирую", "Сниму ответное видео"), 0),
            StoryEvent("Тренер предлагает опасный трюк для виральности. Рискнёшь?",
                listOf("Да, с страховкой", "Только после подготовки", "Откажусь"), 1),
            StoryEvent("Ты попадаешь в мемы. Как воспользуешься этим?",
                listOf("Обыграю в следующем видео", "Попрошу удалить", "Начну продавать мерч"), 0),
            StoryEvent("Кастинг на танцевальное шоу - требуют изменить внешность. Твой ответ?",
                listOf("Соглашусь ради шоу", "Откажусь", "Предложу компромисс"), 1),
            StoryEvent("Конкурентка распускает слухи о твоих связях с продюсером. Твоя реакция?",
                listOf("Публично опровергну", "Игнорирую", "Расскажу правду о ней"), 0),
            StoryEvent("Первая негативная статья: 'Бездарность с миллионом подписчиков'. Что делаешь?",
                listOf("Докажу обратное", "Подам в суд", "Использую для хайпа"), 0),
            StoryEvent("Предложение снять откровенный клип за большие деньги. Твой выбор?",
                listOf("Соглашусь", "Откажусь", "Предложу цензурную версию"), 1),
            StoryEvent("Тренерский курс стоит как три зарплаты. Купишь?",
                listOf("Возьму кредит", "Найду бесплатные альтернативы", "Подожду скидку"), 1),
            StoryEvent("Твой стиль называют 'воровством культуры'. Как ответишь?",
                listOf("Изучу историю танца", "Извинюсь", "Докажу своё видение"), 0),

            // Уровень 21-30: Профессиональный танцор (21-30)
            StoryEvent("Первое место в международном онлайн-баттле. Что дальше?",
                listOf("Сниму разбор победы", "Начну преподавать", "Попрошусь в труппу"), 0),
            StoryEvent("Танцевальная группа предлагает войти в состав. Условия?",
                listOf("Жёсткий контракт", "50% доходов", "Только гастроли"), 1),
            StoryEvent("Травма спины - риск инвалидности. Продолжишь карьеру?",
                listOf("Перейду на преподавание", "Буду лечиться и танцевать", "Уйду из профессии"), 0),
            StoryEvent("Тебя приглашают судить баттлы. Но там много друзей. Твоя позиция?",
                listOf("Буду объективной", "Откажусь", "Предложу анонимное голосование"), 0),
            StoryEvent("Продюсер хочет купить твой аккаунт. Твои условия?",
                listOf("Только партнёрство", "Продам за $1 млн", "Никогда не продам"), 2),
            StoryEvent("Впервые танцуешь с живым оркестром. Ошиблась в ритме. Как выкрутишься?",
                listOf("Импровизирую", "Извинюсь и начну заново", "Сделаю вид, что так задумано"), 0),
            StoryEvent("Требуют сменить имя для международной карьеры. Твой выбор?",
                listOf("Возьму псевдоним", "Оставлю своё", "Добавлю второе имя"), 1),
            StoryEvent("Ты узнаёшь, что продюсер ворует деньги с концертов. Что сделаешь?",
                listOf("Публично разоблачу", "Потребую свою долю", "Промолчу"), 0),
            StoryEvent("Предложение станцевать в рекламе алкоголя. Этично?",
                listOf("Да, это работа", "Только за серьёзные деньги", "Никогда"), 2),
            StoryEvent("Твой стиль теперь называют 'авторским'. Что изменишь?",
                listOf("Ничего", "Добавлю больше сложности", "Создам школу"), 0),

            // Уровень 31-40: Хореограф локальных звёзд (31-40)
            StoryEvent("Первая работа с местной поп-звездой. Она требует плагиат. Твой ответ?",
                listOf("Создам похожее", "Откажусь", "Предложу нечто лучше"), 2),
            StoryEvent("Танцоры жалуются на слишком сложную хореографию. Твои действия?",
                listOf("Упрощу", "Найду новых", "Оставлю как есть"), 0),
            StoryEvent("Концерт через 3 дня - артист меняет песню. Как поступишь?",
                listOf("Экстренно переделаю", "Откажусь", "Упрощу постановку"), 0),
            StoryEvent("Тебя обвиняют в краже чужой хореографии. Доказательства?",
                listOf("Покажу процесс создания", "Подам в суд", "Признаю вдохновение"), 0),
            StoryEvent("Бюджет постановки урезали вдвое. Твой план?",
                listOf("Использую минимализм", "Вложу свои деньги", "Откажусь от проекта"), 0),
            StoryEvent("Звезда требует опасный трюк без страховки. Твоя позиция?",
                listOf("Настою на безопасности", "Уволюсь", "Подпишу отказную"), 0),
            StoryEvent("Твой танцор получает травму на выступлении. Твои действия?",
                listOf("Остановлю шоу", "Импровизирую без него", "Вызову замену"), 0),
            StoryEvent("Конкуренты подкупают твоих танцоров. Как ответишь?",
                listOf("Подниму зарплаты", "Уволю предателей", "Создам контракты"), 1),
            StoryEvent("Фестиваль предлагает выступить бесплатно 'за экспозицию'. Твой выбор?",
                listOf("Соглашусь", "Предложу символическую плату", "Откажусь"), 2),
            StoryEvent("Ты случайно попадаешь в кадр вместо артиста. Реакция СМИ?",
                listOf("Использую для пиара", "Извинюсь", "Предложу совместные проекты"), 0),

            // Уровень 41-50: Национальное признание (41-50)
            StoryEvent("Твою хореографию показывают по ТВ. Но без кредита. Что делаешь?",
                listOf("Требую упоминания", "Подаю в суд", "Благодарю за возможность"), 0),
            StoryEvent("Министерство культуры предлагает 'патриотический' проект. Твои условия?",
                listOf("Полная творческая свобода", "Только за большие деньги", "Откажусь"), 0),
            StoryEvent("Танцоры объединяются в профсоюз против твоих методов. Твой ответ?",
                listOf("Пересмотрю подход", "Уволю всех", "Предложу диалог"), 2),
            StoryEvent("Телешоу хочет эксклюзивные права на твои постановки. Согласишься?",
                listOf("Да, за 50% доходов", "Только лицензия", "Никогда"), 1),
            StoryEvent("Ты выигрываешь 'Хореографа года'. Как воспользуешься победой?",
                listOf("Открою школу", "Подниму цены", "Запущу благотворительный проект"), 2),
            StoryEvent("Звезда требует убрать твоё имя из титров. Твои действия?",
                listOf("Потребую контракт", "Разорву сотрудничество", "Соглашусь ради опыта"), 1),
            StoryEvent("Твой стиль становится мейнстримом. Что изменишь?",
                listOf("Уйду в авангард", "Создам коммерческую линию", "Останусь верной себе"), 0),
            StoryEvent("Продюсер предлагает 'купить' место в мировом турне. Твой выбор?",
                listOf("Заплачу", "Откажусь", "Добьюсь честного отбора"), 2),
            StoryEvent("Ты получаешь предложение от балетной труппы. Но это другой стиль. Согласишься?",
                listOf("Да, это вызов", "Только как эксперимент", "Нет"), 0),
            StoryEvent("Финансовый кризис - нужно уволить половину труппы. Критерии?",
                listOf("По результатам", "По стажу", "Жеребьёвка"), 0),

            // Уровень 51-60: Выход на международный уровень (51-60)
            StoryEvent("Бродвейский продюсер приглашает на кастинг. Готовишься?",
                listOf("Наняту коуча", "Иду как есть", "Отказываюсь - не мой уровень"), 0),
            StoryEvent("Твой проект обвиняют в культурной апроприации. Твоя реакция?",
                listOf("Извинюсь", "Докажу исследование", "Игнорирую"), 1),
            StoryEvent("Мировой тур - но без страховки. Рискнёшь?",
                listOf("Куплю за свой счёт", "Откажусь", "Поеду с риском"), 0),
            StoryEvent("Тебя просят изменить постановку для китайской цензуры. Твоё решение?",
                listOf("Адаптирую", "Откажусь", "Создам специальную версию"), 2),
            StoryEvent("Танцоры угрожают забастовкой из-за условий. Твой ответ?",
                listOf("Улучшу условия", "Найму новых", "Пойду на уступки"), 0),
            StoryEvent("Ты попадаешь в список '30 до 30'. Как воспользуешься?",
                listOf("Запущу образовательный проект", "Использую для переговоров", "Не придам значения"), 0),
            StoryEvent("Контракт на $1 млн - но с запретом личных проектов. Подпишешь?",
                listOf("Да", "Нет", "Потребую исключений"), 1),
            StoryEvent("Твой стиль теперь изучают в университетах. Твои действия?",
                listOf("Прочту лекции", "Напишу методичку", "Останусь практиком"), 0),
            StoryEvent("Предложение снять фильм о твоей жизни. Кто должен играть тебя?",
                listOf("Неизвестная актриса", "Я сама", "Звезда первого плана"), 1),
            StoryEvent("Ты получаешь гражданство за вклад в культуру. Примешь?",
                listOf("Да", "Нет", "Только почётное"), 0),

            // Уровень 61-70: Работа с мировыми звёздами (61-70)
            StoryEvent("Бейонсе хочет эксклюзив на 2 года. Твой ответ?",
                listOf("Соглашусь", "Только на 1 проект", "Откажусь ради свободы"), 1),
            StoryEvent("Твой подтанцовкой становится дочь президента. Она бездарна. Что делаешь?",
                listOf("Учу лично", "Ставлю на задний план", "Прошу убрать её"), 2),
            StoryEvent("Выходишь на сцену вместо заболевшей звезды. Твои действия?",
                listOf("Импровизирую", "Отменяю шоу", "Использую фонограмму"), 0),
            StoryEvent("Конкурент подкупает твоего ассистента. Как ответишь?",
                listOf("Предложу контракт", "Обращусь в полицию", "Использую для дезы"), 1),
            StoryEvent("Ты забываешь хореографию на живом эфире. Как выкрутишься?",
                listOf("Импровизирую", "Извинюсь", "Сделаю вид, что так задумано"), 0),
            StoryEvent("Требуют убрать политический подтекст из шоу. Твоё решение?",
                listOf("Откажусь", "Создам нейтральную версию", "Усилю посыл"), 1),
            StoryEvent("Ты получаешь предложение от Cirque du Soleil. Но нужно переехать. Согласишься?",
                listOf("Да", "Откажусь", "Предложу удалённую работу"), 0),
            StoryEvent("СМИ обвиняют в 'токсичной' атмосфере на репетициях. Твой ответ?",
                listOf("Извинюсь", "Оправдаю методы", "Проведу расследование"), 0),
            StoryEvent("Твой бывший танцор подаёт в суд за 'воровство идей'. Твои действия?",
                listOf("Докажу авторство", "Предложу мировую", "Подам встречный иск"), 0),
            StoryEvent("Ты выигрываешь 'Эмми' за хореографию. Где поставишь статуэтку?",
                listOf("В студии", "Дома", "Отдам в музей"), 0),

            // Уровень 71-80: Живая легенда (71-80)
            StoryEvent("Твои мастер-классы стоят $10k/час. Как распорядишься доходами?",
                listOf("Открою бесплатную школу", "Инвестирую", "Куплю недвижимость"), 0),
            StoryEvent("Метрополитен-музей хочет твои костюмы для выставки. Твои условия?",
                listOf("Бесплатно", "Только с полным контекстом", "Продам коллекцию"), 1),
            StoryEvent("Тебя приглашают преподавать в Juilliard. Требуют диплом. Твой ход?",
                listOf("Получу диплом", "Предложу практический курс", "Откажусь"), 1),
            StoryEvent("Биограф хочет написать о твоей жизни. Допустишь к архивам?",
                listOf("Да", "Только к части", "Напишу самá"), 0),
            StoryEvent("Ты становишься лицом движения #MeToo в танце. Риски?",
                listOf("Черный список в индустрии", "Потеря приватности", "Фальшивые обвинения"), 1),
            StoryEvent("NFT с твоей хореографией продано за $1 млн. Что делаешь?",
                listOf("Вкладываю в искусство", "Жертвую на благотворительность", "Оставляю себе"), 1),
            StoryEvent("Ты получаешь пожизненную стипендию. На что потратишь?",
                listOf("Фонд для талантов", "Личную студию", "Не приму"), 0),
            StoryEvent("Твою технику называют 'наследием человечества'. Твои действия?",
                listOf("Запишу методику", "Оставлю в тайне", "Создам открытую библиотеку"), 0),
            StoryEvent("Предложение танцевать на Марсе в 2030 году. Согласишься?",
                listOf("Да, это история", "Только виртуально", "Я не астронавт"), 0),
            StoryEvent("Ты меняешь представление о танце. Что дальше?",
                listOf("Учу следующее поколение", "Иду в политику", "Ухожу на пике"), 0),

            // Уровень 81-85: Икона стиля (81-85)
            StoryEvent("Твоё имя в словарях. Как контролируешь наследие?",
                listOf("Создаю фонд", "Пишу мемуары", "Никак - отпускаю"), 0),
            StoryEvent("Учёные предлагают 'оцифровать' твой стиль для будущих поколений. Согласишься?",
                listOf("Да", "Только частично", "Нет - это живое искусство"), 2),
            StoryEvent("Ты получаешь дворянский титул за вклад в культуру. Примешь?",
                listOf("Да", "Нет", "Попрошу вместо этого фонд"), 0),
            StoryEvent("Фильм о твоей жизни получает 'Оскар'. Твоя речь?",
                listOf("Благодарность учителям", "Призыв к свободе творчества", "Молчание - танец"), 1),
            StoryEvent("Ты завершаешь карьеру. Последний проект?",
                listOf("Глобальная школа онлайн", "Прощальный концерт", "Ничего - тихо ухожу"), 1)
        )
    ),
        //endregion

        //region События: курсы кодирования -> IT-стартап
        StoryPath(
            "От курсов кодирования до IT-стартапа",
            "Пройдите путь от новичка в программировании до основателя успешной технологической компании",
            listOf(
                // Уровень 1-10: Начало обучения
                StoryEvent("Твой первый день на курсах программирования. С чего начнёшь?",
                    listOf("Выучу синтаксис языка", "Напишу 'Hello World'", "Разберу чужой код"), 1),
                StoryEvent("Ты не понимаешь тему про циклы. Что сделаешь?",
                    listOf("Попрошу помощи у преподавателя", "Буду разбираться сам", "Пропущу эту тему"), 0),
                StoryEvent("Одногруппник просит помочь с заданием. Твой выбор?",
                    listOf("Помогу разобраться", "Сделаю за него", "Откажусь"), 0),
                StoryEvent("Ты нашёл ошибку в коде преподавателя. Как поступишь?",
                    listOf("Укажу на неё публично", "Сообщу приватно", "Промолчу"), 1),
                StoryEvent("Тебе предлагают участвовать в хакатоне. Твоя реакция?",
                    listOf("Откажусь - я ещё новичок", "Соглашусь ради опыта", "Соберу команду"), 1),
                StoryEvent("Твой код не работает, и ты не понимаешь почему. Что сделаешь?",
                    listOf("Буду дебажить", "Удалю и начну заново", "Спрошу на форуме"), 0),
                StoryEvent("Курсы предлагают платную стажировку. Твоё решение?",
                    listOf("Заплачу за возможность", "Поищу бесплатные варианты", "Откажусь"), 1),
                StoryEvent("Ты пропустил важную тему из-за болезни. Как наверстаешь?",
                    listOf("Попрошу материалы у одногруппников", "Куплю дополнительный урок", "Пропущу"), 0),
                StoryEvent("Тебе не нравится язык программирования курсов. Твои действия?",
                    listOf("Продолжу изучать", "Найду курсы по другому языку", "Буду учить оба"), 2),
                StoryEvent("Ты закончил базовый курс. Что дальше?",
                    listOf("Пойду на продвинутый", "Начну pet-проект", "Поищу стажировку"), 1),

                // Уровень 11-20: Первые проекты
                StoryEvent("Твой первый фриланс-заказ. Как подойдёшь к работе?",
                    listOf("Сделаю идеально", "Выполню минимальные требования", "Переоценю свои силы"), 0),
                StoryEvent("Клиент недоволен результатом. Твои действия?",
                    listOf("Исправлю бесплатно", "Аргументирую свою позицию", "Откажусь от проекта"), 0),
                StoryEvent("Ты нашёл баг в production-коде. Что сделаешь?",
                    listOf("Срочно исправлю", "Сообщу команде", "Зафиксирую для будущих обновлений"), 1),
                StoryEvent("Коллега использует твой код без указания авторства. Твоя реакция?",
                    listOf("Конфронтация", "Поговорю спокойно", "Пожалуюсь начальству"), 1),
                StoryEvent("Тебе предлагают работу на устаревшем стеке. Твой выбор?",
                    listOf("Соглашусь ради опыта", "Откажусь", "Буду совмещать с изучением нового"), 2),
                StoryEvent("Твой проект выиграл конкурс. Как воспользуешься успехом?",
                    listOf("Добавлю в портфолио", "Развиву идею дальше", "Поищу инвесторов"), 0),
                StoryEvent("Ты не успеваешь к дедлайну. Что предпримешь?",
                    listOf("Попрошу延期", "Буду работать ночами", "Сдам сырой продукт"), 0),
                StoryEvent("Клиент просит невозможное. Как ответишь?",
                    listOf("Пообещаю попробовать", "Вежливо откажу", "Предложу альтернативу"), 2),
                StoryEvent("Твой наставник советует сменить специализацию. Твоё решение?",
                    listOf("Послушаюсь", "Останусь на своём пути", "Изучу обе области"), 2),
                StoryEvent("Ты получаешь предложение о работе за границей. Твои мысли?",
                    listOf("Соглашусь сразу", "Откажусь из-за языка", "Подтяну навыки и попробую"), 2),

                // Уровень 21-30: Профессиональный рост
                StoryEvent("Тебя повысили до тимлида. Первое решение?",
                    listOf("Оптимизирую процессы", "Проведу ретроспективу", "Улучшу коммуникацию"), 1),
                StoryEvent("Джуниор постоянно ошибается. Как поступишь?",
                    listOf("Проведу менторинг", "Попрошу его уволиться", "Переведу на простые задачи"), 0),
                StoryEvent("Технический долг растёт. Твои действия?",
                    listOf("Выделю время на рефакторинг", "Продолжу новые фичи", "Найму отдельного разработчика"), 0),
                StoryEvent("Конфликт в команде. Твоя стратегия?",
                    listOf("Проведу разбор полётов", "Разведу по разным проектам", "Проигнорирую"), 0),
                StoryEvent("Компания хочет перейти на новый стек. Твоё мнение?",
                    listOf("Поддержу изменения", "Буду сопротивляться", "Предложу поэтапный переход"), 2),
                StoryEvent("Ты нашёл лучшую работу. Уходишь из текущей компании?",
                    listOf("Да, сразу", "Дождусь бонусов", "Попробую совмещать"), 1),
                StoryEvent("Твой проект закрывают. Твоя реакция?",
                    listOf("Буду бороться за него", "Перейду на другой", "Возьму код для портфолио"), 1),
                StoryEvent("Тебе предлагают выступать на конференции. Участвовать?",
                    listOf("Да, это полезно", "Боюсь публики", "Подготовлю запись выступления"), 0),
                StoryEvent("Конкурент предлагает вдвое больше зарплату. Твой выбор?",
                    listOf("Перейду к ним", "Попрошу повышение здесь", "Изучу условия детально"), 2),
                StoryEvent("Ты выгораешь. Что сделаешь?",
                    listOf("Возьму отпуск", "Поменяю работу", "Пройду терапию"), 0),

                // Уровень 31-40: Создание стартапа
                StoryEvent("Ты решил основать стартап. Первый шаг?",
                    listOf("Найму команду", "Зарегистрирую компанию", "Напишу бизнес-план"), 2),
                StoryEvent("Сооснователь хочет 60% доли. Твоя реакция?",
                    listOf("Соглашусь", "Предложу 50/50", "Откажусь от партнёрства"), 1),
                StoryEvent("Ты ищешь инвестиции. Как презентуешь проект?",
                    listOf("Акцент на технологию", "Покажу бизнес-модель", "Расскажу историю"), 0),
                StoryEvent("Первый инвестор отказывает. Твои действия?",
                    listOf("Доработаю pitch", "Обращусь к другим", "Пересмотрю идею"), 1),
                StoryEvent("Конкуренты копируют твой продукт. Как ответишь?",
                    listOf("Ускорю разработку", "Подам в суд", "Сосредоточусь на уникальности"), 2),
                StoryEvent("Технический сооснователь уходит. Что сделаешь?",
                    listOf("Найму нового", "Переучусь сам", "Поменяю продукт"), 0),
                StoryEvent("Первые продажи не удаются. Твоя стратегия?",
                    listOf("Изменю маркетинг", "Доработаю продукт", "Смену целевую аудиторию"), 1),
                StoryEvent("Ты получаешь предложение о покупке стартапа. Твой выбор?",
                    listOf("Продам", "Откажусь", "Попрошу больше денег"), 1),
                StoryEvent("Команда демотивирована. Как исправишь ситуацию?",
                    listOf("Устрою тимбилдинг", "Пообещаю бонусы", "Честно расскажу о положении"), 2),
                StoryEvent("Ты выходишь на break-even. Как отметишь?",
                    listOf("Устрою праздник команде", "Вложу в развитие", "Выплачу премии"), 0),

                // Уровень 41-50: Масштабирование бизнеса
                StoryEvent("Ты расширяешься на новые рынки. Первый регион?",
                    listOf("США", "Европа", "Азия"), 1),
                StoryEvent("Ключевой сотрудник уходит к конкурентам. Твои действия?",
                    listOf("Усилю NDA", "Предложу конкурирующее предложение", "Пожелаю удачи"), 1),
                StoryEvent("Ты получаешь негативный PR. Как реагируешь?",
                    listOf("Игнорирую", "Официальное опровержение", "Использую для хайпа"), 1),
                StoryEvent("Инвестор требует быстрого роста. Твоё решение?",
                    listOf("Пожертвую качеством", "Найду других инвесторов", "Объясню риски"), 2),
                StoryEvent("Технология устаревает. Как адаптируешься?",
                    listOf("Проведу ребрендинг", "Инвестирую в R&D", "Куплю стартап с новой технологией"), 1),
                StoryEvent("Кризис на рынке. Твоя стратегия выживания?",
                    listOf("Сокращения", "Пивот", "Поиск нишевых возможностей"), 2),
                StoryEvent("Ты выходишь на IPO. Как подготовишься?",
                    listOf("Нану финансовых консультантов", "Проведу дорожное шоу", "Укреплю менеджмент"), 0),
                StoryEvent("Правительство регулирует твою отрасль. Твои действия?",
                    listOf("Лоббирование", "Адаптация", "Выход с рынка"), 1),
                StoryEvent("Твой продукт используют для незаконных целей. Что сделаешь?",
                    listOf("Закрою лазейки", "Сотрудничаю с властями", "Это не моя проблема"), 0),
                StoryEvent("Ты становишься CEO года. Как воспользуешься статусом?",
                    listOf("Привлеку новых талантов", "Улучшу имидж компании", "Войду в политику"), 1),

                // Уровень 51-60: Кризис и трансформация
                StoryEvent("Кибератака парализует твои сервисы. Твои действия?",
                    listOf("Заплачу выкуп", "Нану кибербезопасность", "Восстановлю из бэкапов"), 2),
                StoryEvent("Акции падают на 50%. Как реагируешь?",
                    listOf("Выкуплю свои же акции", "Сменю стратегию", "Ничего - это временно"), 1),
                StoryEvent("Этический скандал вокруг твоего ИИ. Твой ответ?",
                    listOf("Создам этический комитет", "Игнорирую", "Обвиню конкурентов"), 0),
                StoryEvent("Ты теряешь ключевого клиента. Как восстановишь доход?",
                    listOf("Диверсификация", "Агрессивный маркетинг", "Снижение издержек"), 0),
                StoryEvent("Пандемия бьёт по бизнесу. Твоя адаптация?",
                    listOf("Удалённые решения", "Новые продукты под ситуацию", "Сокращения"), 1),
                StoryEvent("Конгресс вызывает тебя на слушания. Как подготовишься?",
                    listOf("Нану лоббистов", "Подготовлю отчёт", "Игнорирую вызов"), 1),
                StoryEvent("Твой продукт устарел. Как обновишь линейку?",
                    listOf("Куплю инновационный стартап", "Инвестирую в R&D", "Ребрендинг"), 1),
                StoryEvent("Сотрудники объявляют забастовку. Твои действия?",
                    listOf("Уступлю требованиям", "Проведу переговоры", "Найму новых"), 1),
                StoryEvent("Ты выходишь на рынок B2G. Первый контракт?",
                    listOf("Оборона", "Здравоохранение", "Образование"), 0),
                StoryEvent("Твоя компания попадает в санкционный список. Твой ход?",
                    listOf("Оспорю решение", "Перерегистрирую бизнес", "Войду в теневой рынок"), 0),

                // Уровень 61-70: Глобальная экспансия
                StoryEvent("Ты открываещь R&D центр за границей. Где?",
                    listOf("Силиконовая долина", "Израиль", "Сингапур"), 2),
                StoryEvent("Местные власти требуют локализации данных. Твоё решение?",
                    listOf("Построю дата-центр", "Откажусь от рынка", "Найду лазейку"), 0),
                StoryEvent("Ты покупаешь конкурирующий стартап. Что сделаешь с командой?",
                    listOf("Интегрирую", "Оставлю автономной", "Уволю большинство"), 1),
                StoryEvent("Культурные различия мешают работе. Твои действия?",
                    listOf("Введу единые стандарты", "Адаптируюсь к локальным", "Найму культурного консультанта"), 2),
                StoryEvent("Ты запускаещь продукт в Китае. Стратегия?",
                    listOf("Совместное предприятие", "Полная локализация", "Партнёрство с местным гигантом"), 1),
                StoryEvent("Глобальный кризис цепочек поставок. Твоё решение?",
                    listOf("Вертикальная интеграция", "Поиск локальных поставщиков", "3D-печать компонентов"), 1),
                StoryEvent("Ты создаёщь фонд для поддержки стартапов. Критерии отбора?",
                    listOf("Социальное влияние", "Технологический прорыв", "Финансовый потенциал"), 0),
                StoryEvent("Твой продукт запрещают в ЕС из-за регуляций. Твои действия?",
                    listOf("Адаптирую под GDPR", "Уйду с рынка", "Оспорю в суде"), 0),
                StoryEvent("Ты становишься монополистом. Как избежишь раздела?",
                    listOf("Лоббирование", "Самодробление", "Создание искусственных конкурентов"), 1),
                StoryEvent("Ты выходишь на рынок развивающихся стран. Бизнес-модель?",
                    listOf("Freemium", "Микротранзакции", "Партнёрство с правительствами"), 1),

                // Уровень 71-80: Технологический лидер
                StoryEvent("Ты инвестируешь в квантовые вычисления. Ожидания?",
                    listOf("Прорыв в шифровании", "Ускорение ИИ", "Новые материалы"), 1),
                StoryEvent("Твой ИИ совершает этическую ошибку. Твоя реакция?",
                    listOf("Отключу систему", "Доработаю алгоритмы", "Создам наблюдательный совет"), 2),
                StoryEvent("Ты разрабатываещь интерфейс мозг-компьютер. Первое применение?",
                    listOf("Медицина", "Образование", "Развлечения"), 0),
                StoryEvent("Ты покупаещь футбольный клуб. Зачем?",
                    listOf("Технологии для спорта", "Маркетинг", "Личный интерес"), 0),
                StoryEvent("Ты создаёщь город будущего. Ключевая технология?",
                    listOf("Умная инфраструктура", "Автономный транспорт", "Замкнутые экосистемы"), 0),
                StoryEvent("Ты запускаещь спутниковый интернет. Первый регион покрытия?",
                    listOf("Африка", "Океания", "Арктика"), 0),
                StoryEvent("Ты инвестируешь в бессмертие. Направление?",
                    listOf("Крионика", "Генная терапия", "Цифровое сознание"), 1),
                StoryEvent("Ты открываещь исследовательский центр на Марсе. Цель?",
                    listOf("Колония", "Добыча ресурсов", "Научные эксперименты"), 2),
                StoryEvent("Ты создаёщь виртуальную нацию. Валюта?",
                    listOf("Криптовалюта", "Репутация", "Вычислительные ресурсы"), 0),
                StoryEvent("Ты получаещь Нобелевскую премию. За что?",
                    listOf("Технологии мира", "Медицинский прорыв", "Экономические инновации"), 0),

                // Уровень 81-90: Видение будущего
                StoryEvent("Ты председательствуещь в глобальном техно-совете. Первая инициатива?",
                    listOf("Этический кодекс ИИ", "Стандарты интернета", "Кибербезопасность"), 0),
                StoryEvent("Ты создаёщь цифровую копию себя. Как используещь?",
                    listOf("Советник", "Замена на переговорах", "Эксперименты"), 0),
                StoryEvent("Ты открываещь университет будущего. Чему учить?",
                    listOf("Квантовые технологии", "Космическая инженерия", "Гуманитарные науки"), 1),
                StoryEvent("Ты изобретаещь машину времени. Первое применение?",
                    listOf("Исправление ошибок", "Исторические исследования", "Никакое - это опасно"), 2),
                StoryEvent("Ты обнаруживаещь инопланетную технологию. Что сделаещь?",
                    listOf("Запатентую", "Исследую открыто", "Спрячу"), 1),
                StoryEvent("Ты становишься героем антиутопии. Как избежишь судьбы?",
                    listOf("Дамократизирую технологии", "Создам противовес", "Уйду в подполье"), 0),
                StoryEvent("Ты создаёщь искусственную жизнь. Этические границы?",
                    listOf("Полный запрет", "Контролируемое развитие", "Свободная эволюция"), 1),
                StoryEvent("Ты можешь загрузить сознание в сеть. Твой выбор?",
                    listOf("Да, немедленно", "Только копию", "Никогда"), 1),
                StoryEvent("Ты получаещь доступ к абсолютному знанию. Как ограничишь?",
                    listOf("Фильтры для человечества", "Постепенное раскрытие", "Полный доступ для всех"), 1),
                StoryEvent("Ты переписываещь законы физики. Первое изменение?",
                    listOf("Сверхсветовые скорости", "Телепортация", "Отмена энтропии"), 0),

                // Уровень 91-100: Наследие
                StoryEvent("Ты завершаещь карьеру. Последний проект?",
                    listOf("Фонд поддержки гениев", "Капсула времени", "Манифест будущего"), 0),
                StoryEvent("Ты выбираещь преемника. Кто это?",
                    listOf("ИИ", "Протеже", "Случайный выбор"), 1),
                StoryEvent("Твоё имя становится символом эпохи. Как увековечишь?",
                    listOf("Университет", "Премия", "Космический корабль"), 1),
                StoryEvent("Ты оставляещь послание потомкам. Главный совет?",
                    listOf("Доверяйте разуму", "Берегите человечность", "Смело идите вперёд"), 1),
                StoryEvent("Ты можешь стереть все свои ошибки. Сделаешь это?",
                    listOf("Да", "Нет", "Только некоторые"), 1),
                StoryEvent("Твои технологии изменили человечество. Что дальше?",
                    listOf("К звёздам", "Внутренняя гармония", "Слияние с машинами"), 0),
                StoryEvent("Ты создаёщь вечный памятник. Форма?",
                    listOf("Цифровой артефакт", "Физический монумент", "Живая традиция"), 2),
                StoryEvent("Ты передаёщь власть. Кому?",
                    listOf("Коллективному разуму", "Демократическому совету", "Никому"), 0),
                StoryEvent("Ты подводишь итоги. Главное достижение?",
                    listOf("Технологии", "Изменение общества", "Вдохновение"), 2),
                StoryEvent("Твоя последняя запись в блоге. О чём?",
                    listOf("Будущее", "Советы", "Благодарность"), 2)
            )
        )
        //endregion

    )

    override fun getBotToken(): String = System.getenv("BOT_TOKEN") ?: error("BOT_TOKEN not set")
    override fun getBotUsername(): String = "@WayUpX_bot"

    private fun createMainMenu(): ReplyKeyboardMarkup {
        return ReplyKeyboardMarkup().apply {
            resizeKeyboard = true
            oneTimeKeyboard = false
            keyboard = listOf(
                KeyboardRow(listOf(
                    KeyboardButton("▶️ Выбрать сюжет"),
                    KeyboardButton("🔄 Начать заново"),
                    KeyboardButton("❌ Сбросить бота")
                )))
        }
    }

    private fun createStorySelectionMenu(): InlineKeyboardMarkup {
        return InlineKeyboardMarkup().apply {
            keyboard = storyPaths.mapIndexed { index, story ->
                val bestTime = bestTimes[index]
                val timeText = if (bestTime != null) {
                    val minutes = bestTime.toMinutes()
                    val seconds = bestTime.seconds % 60
                    " (Лучшее время: ${minutes}м ${seconds}с)"
                } else {
                    ""
                }
                listOf(InlineKeyboardButton("${story.title}$timeText").apply {
                    callbackData = "select_story_$index"
                })
            }
        }
    }


    override fun onUpdateReceived(update: Update?) {
        try {
            when {
                update?.hasMessage() == true -> handleMessage(update.message)
                update?.callbackQuery != null -> handleCallback(update.callbackQuery)
            }
        } catch (e: Exception) {
            e.printStackTrace()
            update?.message?.chatId?.let { sendMessage(it, "⚠️ Произошла ошибка. Пожалуйста, попробуйте снова.", createMainMenu()) }
        }
    }

    private fun handleMessage(message: org.telegram.telegrambots.meta.api.objects.Message) {
        val chatId = message.chatId
        when {
            message.text == "/start" -> showWelcomeMessage(chatId)
            message.text == "❌ Сбросить бота" -> resetBot(chatId)
            message.text == "▶️ Выбрать сюжет" -> selectStory(chatId)
            message.text == "🔄 Начать заново" -> restartGame(chatId)
            else -> sendMessage(chatId, "Используйте кнопки меню для взаимодействия с ботом", createMainMenu())
        }
    }

    private fun resetBot(chatId: Long) {
        // Полный сброс всех данных пользователя
        userStates.remove(chatId)
        userErrors.remove(chatId)
        userStartTime.remove(chatId)
        userMessageIds.remove(chatId)
        userCurrentStory.remove(chatId)

        // Отправляем приветственное сообщение с теми же кнопками
        sendMessage(chatId, """
            🚀 Бот был полностью сброшен!
            
            Все ваши данные удалены. Вы можете начать новую игру.
            
            Выберите сюжет, который хотите пройти.
            Вам предстоит принимать решения и продвигаться по карьерной лестнице.
            У вас есть $MAX_ERRORS жизни на ошибки.
            
            Нажмите "▶️ Выбрать сюжет" для начала игры!
        """.trimIndent(), createMainMenu())
    }

    private fun showWelcomeMessage(chatId: Long) {
        sendMessage(chatId, """
            🚀 Добро пожаловать в игру "Карьерный рост"!
            
            Выберите сюжет, который хотите пройти.
            Вам предстоит принимать решения и продвигаться по карьерной лестнице.
            У вас есть $MAX_ERRORS жизни на ошибки.
            
            Нажмите "▶️ Выбрать сюжет" для начала игры!
        """.trimIndent(), createMainMenu())
    }

    private fun selectStory(chatId: Long) {
        sendMessage(chatId, "📚 Выберите сюжет для игры:", createStorySelectionMenu())
    }

    private fun handleCallback(callback: org.telegram.telegrambots.meta.api.objects.CallbackQuery) {
        val chatId = callback.message.chatId
        val data = callback.data

        execute(AnswerCallbackQuery(callback.id))

        when {
            data.startsWith("select_story_") -> {
                val storyIndex = data.removePrefix("select_story_").toInt()
                startGame(chatId, storyIndex)
            }
            data.startsWith("choice_") -> handleAnswer(chatId, data.removePrefix("choice_").toInt())
            data == "restart" -> restartGame(chatId)
        }
    }

    private fun startGame(chatId: Long, storyIndex: Int) {
        if (storyIndex !in storyPaths.indices) {
            sendMessage(chatId, "Ошибка: выбран несуществующий сюжет", createMainMenu())
            return
        }

        userStates[chatId] = 0
        userErrors[chatId] = 0
        userStartTime[chatId] = Instant.now()
        userCurrentStory[chatId] = storyIndex

        val story = storyPaths[storyIndex]
        sendMessage(chatId, """
            🏁 Начинаем игру: ${story.title}
            ${story.description}
            
            У вас есть $MAX_ERRORS жизни. Удачи!
        """.trimIndent(), null)

        sendNextQuestion(chatId)
    }

    private fun restartGame(chatId: Long) {
        userMessageIds[chatId]?.let { deleteMessage(chatId, it) }
        userCurrentStory[chatId]?.let { storyIndex ->
            startGame(chatId, storyIndex)
            sendMessage(chatId, "🔄 Игра перезапущена! Начинаем сначала.", null)
        } ?: run {
            sendMessage(chatId, "Сначала выберите сюжет для игры", createMainMenu())
        }
    }

    private fun handleAnswer(chatId: Long, answerIndex: Int) {
        val currentQuestionIndex = userStates[chatId] ?: run {
            restartGame(chatId)
            return
        }

        val storyIndex = userCurrentStory[chatId] ?: run {
            sendMessage(chatId, "Ошибка: сюжет не выбран", createMainMenu())
            return
        }

        val question = storyPaths[storyIndex].events.getOrNull(currentQuestionIndex) ?: run {
            endGame(chatId, true)
            return
        }

        userMessageIds[chatId]?.let { deleteMessage(chatId, it) }

        if (answerIndex == question.correctAnswerIndex) {
            handleCorrectAnswer(chatId)
        } else {
            handleWrongAnswer(chatId, question)
        }
    }

    private fun handleCorrectAnswer(chatId: Long) {
        val resultMsg = sendMessage(chatId, "✅ Правильно! Переходим к следующему вопросу...", null)
        scheduleMessageDeletion(chatId, resultMsg.messageId, 2)

        val nextQuestionIndex = (userStates[chatId] ?: 0) + 1
        userStates[chatId] = nextQuestionIndex
        sendNextQuestion(chatId)
    }

    private fun handleWrongAnswer(chatId: Long, question: StoryEvent) {
        val errors = (userErrors[chatId] ?: 0) + 1
        userErrors[chatId] = errors

        val livesLeft = MAX_ERRORS - errors
        val message = buildString {
            append("❌ Неправильно! Правильный ответ: ${question.options[question.correctAnswerIndex]}\n")
            when (livesLeft) {
                2 -> append("Осталось 2 жизни")
                1 -> append("Осталась 1 жизнь")
                0 -> append("Вы проиграли!")
            }
        }

        val resultMsg = sendMessage(chatId, message, null)
        scheduleMessageDeletion(chatId, resultMsg.messageId, 4)

        if (errors >= MAX_ERRORS) {
            endGame(chatId, false)
        } else {
            userStates[chatId] = (userStates[chatId] ?: 0) + 1
            sendNextQuestion(chatId)
        }
    }

    private fun sendNextQuestion(chatId: Long) {
        val storyIndex = userCurrentStory[chatId] ?: run {
            sendMessage(chatId, "Ошибка: сюжет не выбран", createMainMenu())
            return
        }

        val questionIndex = userStates[chatId] ?: 0
        val story = storyPaths[storyIndex]

        if (questionIndex >= story.events.size) {
            endGame(chatId, true)
            return
        }

        val question = story.events[questionIndex]
        val keyboard = InlineKeyboardMarkup().apply {
            keyboard = question.options.mapIndexed { index, option ->
                listOf(InlineKeyboardButton(option).apply {
                    callbackData = "choice_$index"
                })
            } + listOf(
                listOf(InlineKeyboardButton("🔄 Начать заново").apply {
                    callbackData = "restart"
                })
            )
        }

        val message = execute(SendMessage(chatId.toString(), question.question).apply {
            replyMarkup = keyboard
        })

        userMessageIds[chatId] = message.messageId
    }

    private fun endGame(chatId: Long, isWin: Boolean) {
        userMessageIds.remove(chatId)?.let { deleteMessage(chatId, it) }

        val startTime = userStartTime.remove(chatId) ?: Instant.now()
        val timeElapsed = Duration.between(startTime, Instant.now())
        val minutes = timeElapsed.toMinutes()
        val seconds = timeElapsed.seconds % 60

        val storyIndex = userCurrentStory.remove(chatId) ?: 0
        val story = storyPaths[storyIndex]

        val message = if (isWin) {
            // Обновляем лучшее время, если текущее лучше
            val currentBestTime = bestTimes[storyIndex]
            if (currentBestTime == null || timeElapsed < currentBestTime) {
                bestTimes[storyIndex] = timeElapsed
            }

            val totalQuestions = story.events.size
            val correctAnswers = totalQuestions - (userErrors[chatId] ?: 0)
            val score = correctAnswers.toDouble() / totalQuestions * 100
            "🎉 Поздравляем! Вы успешно завершили сюжет \"${story.title}\" за $minutes минут $seconds секунд!\n" +
                    "Ваш результат: ${correctAnswers}/${totalQuestions} (${"%.1f".format(score)}% правильных ответов)\n\n" +
                    "Нажмите \"▶️ Выбрать сюжет\", чтобы сыграть ещё раз!"
        } else {
            "😞 Игра окончена. Вы совершили ${MAX_ERRORS} ошибки.\n" +
                    "Нажмите \"▶️ Выбрать сюжет\", чтобы попробовать снова!"
        }

        userStates.remove(chatId)
        userErrors.remove(chatId)

        sendMessage(chatId, message, createMainMenu())
    }


    private fun sendMessage(chatId: Long, text: String, replyMarkup: Any?): org.telegram.telegrambots.meta.api.objects.Message {
        return try {
            execute(SendMessage(chatId.toString(), text).apply {
                this.replyMarkup = replyMarkup as ReplyKeyboard?
            })
        } catch (e: Exception) {
            e.printStackTrace()
            throw e
        }
    }

    private fun deleteMessage(chatId: Long, messageId: Int?) {
        messageId?.let {
            try {
                execute(DeleteMessage(chatId.toString(), it))
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
    }

    private fun scheduleMessageDeletion(chatId: Long, messageId: Int, delaySeconds: Long) {
        scheduler.schedule({
            deleteMessage(chatId, messageId)
        }, delaySeconds, TimeUnit.SECONDS)
    }

    override fun onClosing() {
        scheduler.shutdown()
        try {
            if (!scheduler.awaitTermination(5, TimeUnit.SECONDS)) {
                scheduler.shutdownNow()
            }
        } catch (e: InterruptedException) {
            scheduler.shutdownNow()
        }
        super.onClosing()
    }
}